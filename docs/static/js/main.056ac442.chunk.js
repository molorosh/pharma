(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(22)},17:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(4),s=a.n(o),r=(a(17),a(5)),c=a(6),i=a(10),d=a(7),m=a(11),u=a(1),h=a(8),p=a.n(h),v=new(a(9).a)("MoloroshPharmaDB");v.version(1).stores({persons:"++id"}),v.version(2).stores({persons:"++id",meds:"++id,personId"});var g=v,E=(a(21),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={units:["tablets(s)","ml"],colors:["Pink","Orchid","Salmon","Orange","Khaki","Gainsboro"],icons:["\u06dd","\u06de","\u229c","\u229e","\u2299","\u2297"],newUserName:"",newUserColor:"Pink",newUserIcon:"\u06dd",version:"0.2.0.0",meds:[]},a.handleChangeName=a.handleChangeName.bind(Object(u.a)(Object(u.a)(a))),a.doChangeNewUserName=a.doChangeNewUserName.bind(Object(u.a)(Object(u.a)(a))),a.doChangeNewUserColor=a.doChangeNewUserColor.bind(Object(u.a)(Object(u.a)(a))),a.doChangeNewUserIcon=a.doChangeNewUserIcon.bind(Object(u.a)(Object(u.a)(a))),a.doAddNewUser=a.doAddNewUser.bind(Object(u.a)(Object(u.a)(a))),a.fetchAllData=a.fetchAllData.bind(Object(u.a)(Object(u.a)(a))),a.fetchOnlyUsers=a.fetchOnlyUsers.bind(Object(u.a)(Object(u.a)(a))),a.fetchOnlyMeds=a.fetchOnlyMeds.bind(Object(u.a)(Object(u.a)(a))),a.doAddNewMed=a.doAddNewMed.bind(Object(u.a)(Object(u.a)(a))),a.doMedsCalculations=a.doMedsCalculations.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchAllData()}},{key:"isEmptyOrSpaces",value:function(e){return null===e||null!==e.match(/^ *$/)}},{key:"isSomething",value:function(e){return!(null===e||null!==e.match(/^ *$/))}},{key:"fetchOnlyUsers",value:function(){var e=this;g.table("persons").toArray().then(function(t){e.setState({persons:t})})}},{key:"fetchOnlyMeds",value:function(){var e=this;g.table("meds").toArray().then(function(t){if(t&&t.length)for(var a=0,n=t.length;a<n;a++)e.doMedsCalculations(t[a]);e.setState({meds:t})})}},{key:"fetchAllData",value:function(){var e=this;g.table("persons").toArray().then(function(t){e.setState({persons:t},e.fetchOnlyMeds())})}},{key:"doMedsCalculations",value:function(e){var t=e.stockAmount/e.scheduleAmount*e.everyNdays,a=new Date(Date.parse(e.stockDate+"T00:00:00Z")),n=new Date,l=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())),o=new Date(a.valueOf());o.setDate(o.getDate()+t);var s=o.getTime()-l.getTime(),r=Math.ceil(s/864e5);e.daysLeft=r,e.until=this.fromDateToDateString(o)}},{key:"doAddNewMed",value:function(e){var t=document.getElementById("newMedName_"+e).value,a=document.getElementById("newMedDose_"+e).value,n=document.getElementById("newMedStrength_"+e).value,l=document.getElementById("newMedStock_"+e).value,o=document.getElementById("newMedEveryNDays_"+e).value,s=document.getElementById("newMedUnits_"+e).value;if(this.isSomething(t)){var r={personId:e,name:t,strength:n,units:s,stockDate:this.today(),stockAmount:l,scheduleAmount:a,everyNdays:o};g.table("meds").add(r).then(this.fetchAllData())}}},{key:"doAddNewUser",value:function(){var e=this.state.newUserName,t=this.state.newUserColor,a=this.state.newUserIcon;if(!this.isEmptyOrSpaces(e)){var n={name:e,icon:a,color:t};g.table("persons").add(n).then(this.fetchAllData())}}},{key:"handleChangeName",value:function(e){this.setState({newUserName:e.target.value})}},{key:"doChangeNewUserName",value:function(e){this.setState({newUserName:e.target.value})}},{key:"doChangeNewUserIcon",value:function(e){this.setState({newUserIcon:e.target.value})}},{key:"doChangeNewUserColor",value:function(e){this.setState({newUserColor:e.target.value})}},{key:"fromDateToDateString",value:function(e){var t=e.getFullYear()+"-",a=e.getMonth();a<9&&(t+="0"),t+=a+1+"-";var n=e.getDate();return n<10&&(t+="0"),t+=n}},{key:"today",value:function(){return this.fromDateToDateString(new Date)}},{key:"render",value:function(){var e=this,t=this.state.units.slice().map(function(e){return l.a.createElement("option",{key:e,value:e},e)}),a=this.state.colors.slice().map(function(e){var t={backgroundColor:e};return l.a.createElement("option",{style:t,key:e,value:e},e)}),n={backgroundColor:this.state.newUserColor},o=l.a.createElement("select",{style:n,onChange:this.doChangeNewUserColor,value:this.state.newUserColor},a),s=this.state.icons.slice().map(function(e){return l.a.createElement("option",{key:e,value:e},e)}),r=l.a.createElement("select",{onChange:this.doChangeNewUserIcon,value:this.state.newUserIcon},s),c=null,i=null;this.state.persons&&(c=this.state.persons.slice().map(function(a){var n={backgroundColor:a.color},o=e.state.meds.slice();return i=o.map(function(e){return e.personId===a.id?l.a.createElement("div",{className:"pharma-person-medicine",key:e.id},l.a.createElement("p",null,l.a.createElement("strong",null,e.name)," ",l.a.createElement("em",null,"(",e.strength,")")),l.a.createElement("p",null,"days left: ",l.a.createElement("strong",null,e.daysLeft)," ",l.a.createElement("em",null,"(",e.until,")"))):void 0}),l.a.createElement("div",{key:a.id,className:"pharma-person",style:n},l.a.createElement("h1",null,a.icon," ",a.name),l.a.createElement("h4",null,l.a.createElement("span",{role:"img","aria-label":"Medicine"},"\ud83d\udc8a")," Medicines"),l.a.createElement("div",{className:"pharma-add-new-medecine"},l.a.createElement("p",null,"name: ",l.a.createElement("input",{id:"newMedName_"+a.id,type:"text"})),l.a.createElement("p",null,"units: ",l.a.createElement("select",{defaultValue:"tablet(s)",id:"newMedUnits_"+a.id},t)),l.a.createElement("p",null,"strength: ",l.a.createElement("input",{size:"7",maxLength:"7",id:"newMedStrength_"+a.id,type:"text"})),l.a.createElement("p",null,"dose: ",l.a.createElement("input",{size:"7",maxLength:"7",id:"newMedDose_"+a.id,type:"text"})),l.a.createElement("p",null,"every",l.a.createElement("select",{defaultValue:"1",id:"newMedEveryNDays_"+a.id},l.a.createElement("option",{value:"1"},"1"),l.a.createElement("option",{value:"1"},"2"),l.a.createElement("option",{value:"1"},"3"),l.a.createElement("option",{value:"1"},"4"),l.a.createElement("option",{value:"1"},"5"),l.a.createElement("option",{value:"1"},"6"),l.a.createElement("option",{value:"1"},"7"))," days"),l.a.createElement("p",null,"stock level: ",l.a.createElement("input",{size:"7",maxLength:"7",id:"newMedStock_"+a.id,type:"text"})),l.a.createElement("p",null,l.a.createElement("button",{className:"pharma-btn pharma-btn-add",onClick:function(){var t="??",n=document.getElementById("newMedName_"+a.id);n&&(t=n.value,e.doAddNewMed(a.id,t))}},"Add"))),i)}));return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("div",{className:"App-header-div"},l.a.createElement("div",{className:"App-header-div-logo"},l.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"})),l.a.createElement("div",{className:"App-header-div-title"},l.a.createElement("h1",null,"Pharma")))),l.a.createElement("section",{className:"AppSection"},l.a.createElement("h3",null,l.a.createElement("span",{role:"img","aria-label":"People"},"\ud83d\udc65")," People"),l.a.createElement("div",null,l.a.createElement("p",null,"initials: ",l.a.createElement("input",{type:"text",size:"5",maxLength:"5",value:this.state.newUserName,onChange:this.doChangeNewUserName}),"color: ",o,"icon: ",r,l.a.createElement("button",{className:"pharma-btn pharma-btn-add",onClick:this.doAddNewUser},"Add")),c)),l.a.createElement("footer",{className:"App-footer"},l.a.createElement("div",{className:"App-footer-div"},l.a.createElement("div",{className:"App-footer-version"},l.a.createElement("p",{className:"App-footer-version"},"Version: ",l.a.createElement("span",{className:"App-footer-version"},this.state.version))),l.a.createElement("div",{className:"App-footer-copyright"},l.a.createElement("p",{className:"App-footer-copyright"},"\xa9 2019 molorosh")))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports=a.p+"static/media/logo.c695c8b2.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.056ac442.chunk.js.map