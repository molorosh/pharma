(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(22)},17:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(10),o=a.n(r),s=(a(17),a(1)),c=a(2),i=a(5),m=a(3),d=a(4),u=a(6),p=a(8),h=a.n(p),E=new(a(11).a)("MoloroshPharmaDB");E.version(1).stores({persons:"++id"}),E.version(2).stores({persons:"++id",meds:"++id,personId"});var v=E,N=(a(21),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChangeName=function(e){a.setState({newUserName:e.target.value})},a.doChangeNewUserName=function(e){a.setState({newUserName:e.target.value})},a.doChangeNewUserIcon=function(e){a.setState({newUserIcon:e.target.value})},a.doChangeNewUserColor=function(e){a.setState({newUserColor:e.target.value})},a.doAttemptAddNewUser=function(){var e=a.state.newUserName,t=a.state.newUserColor,n=a.state.newUserIcon,l=void 0,r=0;a.isEmptyOrSpaces(e)&&(l="Please enter a username",r++),a.setState({errUserName:l},function(){0===r&&a.props.callbackPersonAdd(e,n,t)})},a.state={personId:e.personId,newUserName:"",newUserColor:"Pink",newUserIcon:"\u06dd",errUserName:void 0,colors:["Pink","Orchid","Salmon","Orange","Khaki","Gainsboro"],icons:["\u06dd","\u06de","\u229c","\u229e","\u2299","\u2297"]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.personId&&v.table("persons").get(this.state.personId).then(function(t){e.setState({newUserName:t.name})})}},{key:"isEmptyOrSpaces",value:function(e){return null===e||null!==e.match(/^ *$/)}},{key:"isSomething",value:function(e){return!(null===e||null!==e.match(/^ *$/))}},{key:"render",value:function(){var e=this,t="pharma-person-control",a="",n=void 0,r=void 0;if(void 0===this.props.personId){t+=" pharma-person-add",a="Add New Person";var o=this.state.colors.slice().map(function(e){var t={backgroundColor:e};return l.a.createElement("option",{style:t,key:e,value:e},e)}),s={backgroundColor:this.state.newUserColor},c=l.a.createElement("select",{style:s,onChange:this.doChangeNewUserColor,value:this.state.newUserColor},o),i=this.state.icons.slice().map(function(e){return l.a.createElement("option",{key:e,value:e},e)}),m=l.a.createElement("select",{onChange:this.doChangeNewUserIcon,value:this.state.newUserIcon},i);n=l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"pharma-edit-layout"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"initials:"),l.a.createElement("td",{className:"pharma-edit-layout-control"},l.a.createElement("input",{type:"text",size:"5",maxLength:"5",value:this.state.newUserName,onChange:this.doChangeNewUserName})),l.a.createElement("td",{className:"pharma-edit-layout-error"},this.state.errUserName)),l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"color:"),l.a.createElement("td",{className:"pharma-edit-layout-control"},c),l.a.createElement("td",{className:"pharma-edit-layout-error"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"icons:"),l.a.createElement("td",{className:"pharma-edit-layout-control"},m),l.a.createElement("td",{className:"pharma-edit-layout-error"}))))),r=l.a.createElement("button",{onClick:this.doAttemptAddNewUser,className:"pharma-btn pharma-btn-add"},"Add New Person")}else"delete"===this.props.mode?(t+=" pharma-person-delete",a="Delete Person and Medicines",n=l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"person to delete: ",l.a.createElement("strong",null,this.state.newUserName))),r=l.a.createElement("button",{onClick:function(){e.props.callbackPersonDelete(e.state.personId)},className:"pharma-btn pharma-btn-delete"},"Delete [",this.state.newUserName,"]")):(t+=" pharma-person-edit",a="Edit Person");return l.a.createElement("div",{className:t},l.a.createElement("h3",null,l.a.createElement("code",null,a)),n,l.a.createElement("p",null,l.a.createElement("button",{onClick:this.props.onCancel,className:"pharma-btn pharma-btn-cancel"},"Cancel"),r))}}]),t}(n.Component)),f=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={personId:e.personId,medicineId:e.medicineId},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e="pharma-medicine-control",t="";return void 0===this.props.medicineId?(e+=" pharma-medicine-add",t="Add New Medicine"):"delete"===this.props.mode?(e+=" pharma-medicine-delete",t="Delete Medicine"):"restock"===this.props.mode?(e+=" pharma-medicine-restock",t="Restock Medicine"):(t="Edit Medicine",e+=" pharma-medicine-edit"),l.a.createElement("div",{className:e},l.a.createElement("h3",null,l.a.createElement("code",null,t)),l.a.createElement("p",null,l.a.createElement("code",null,"personId: ",this.state.personId)),l.a.createElement("p",null,l.a.createElement("code",null,"medicineId: ",this.state.medicineId)),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"name:"),l.a.createElement("td",{className:"pharma-edit-layout-control"},l.a.createElement("input",{type:"text"})),l.a.createElement("td",{className:"pharma-edit-layout-error"},this.state.errName)),l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"units:"),l.a.createElement("td",{className:"pharma-edit-layout-control"}),l.a.createElement("td",{className:"pharma-edit-layout-error"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"strength:"),l.a.createElement("td",{className:"pharma-edit-layout-control"}),l.a.createElement("td",{className:"pharma-edit-layout-error"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"dose:"),l.a.createElement("td",{className:"pharma-edit-layout-control"}),l.a.createElement("td",{className:"pharma-edit-layout-error"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"strength:"),l.a.createElement("td",{className:"pharma-edit-layout-control"}),l.a.createElement("td",{className:"pharma-edit-layout-error"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"strength:"),l.a.createElement("td",{className:"pharma-edit-layout-control"}),l.a.createElement("td",{className:"pharma-edit-layout-error"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"every:"),l.a.createElement("td",{className:"pharma-edit-layout-control"},"XX days"),l.a.createElement("td",{className:"pharma-edit-layout-error"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"pharma-edit-layout-label"},"stock level:"),l.a.createElement("td",{className:"pharma-edit-layout-control"}),l.a.createElement("td",{className:"pharma-edit-layout-error"})))),l.a.createElement("p",null,l.a.createElement("button",{onClick:this.props.onCancel,className:"pharma-btn pharma-btn-cancel"},"Cancel")))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).doEditMedicine=function(e,t){console.log("doEditMedicine("+e+","+t+")"),a.setState({mode:"edit",personId:e,medicineId:t,control:"medicine"})},a.doDeleteMedicine=function(e,t){console.log("doDeleteMedicine("+e+","+t+")"),a.setState({mode:"delete",personId:e,medicineId:t,control:"medicine"})},a.doRestockMedicine=function(e,t){console.log("doRestockMedicine("+e+","+t+")"),a.setState({mode:"restock",personId:e,medicineId:t,control:"medicine"})},a.doCancelEdit=function(){a.setState({mode:"list",personId:void 0,medicineId:void 0,control:void 0})},a.doEditUser=function(e){a.setState({mode:"edit",personId:e,medicineId:void 0,control:"person"})},a.doDeleteUser=function(e){a.setState({mode:"delete",personId:e,medicineId:void 0,control:"person"})},a.fetchOnlyUsers=function(){v.table("persons").toArray().then(function(e){a.setState({persons:e})})},a.fetchOnlyMeds=function(){v.table("meds").toArray().then(function(e){if(e&&e.length)for(var t=0,n=e.length;t<n;t++)a.doMedsCalculations(e[t]);a.setState({meds:e})})},a.fetchAllData=function(){v.table("persons").toArray().then(function(e){a.setState({persons:e,mode:"list"},a.fetchOnlyMeds())})},a.doMedsCalculations=function(e){var t=e.stockAmount/e.scheduleAmount*e.everyNdays,n=new Date(Date.parse(e.stockDate+"T00:00:00Z")),l=new Date,r=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate())),o=new Date(n.valueOf());o.setDate(o.getDate()+t);var s=o.getTime()-r.getTime(),c=Math.ceil(s/864e5);e.daysLeft=c,e.until=a.fromDateToDateString(o)},a.doAddNewMed=function(e){var t=document.getElementById("newMedName_"+e).value,n=document.getElementById("newMedDose_"+e).value,l=document.getElementById("newMedStrength_"+e).value,r=document.getElementById("newMedStock_"+e).value,o=document.getElementById("newMedEveryNDays_"+e).value,s=document.getElementById("newMedUnits_"+e).value;if(a.isSomething(t)){var c={personId:e,name:t,strength:l,units:s,stockDate:a.today(),stockAmount:r,scheduleAmount:n,everyNdays:o};v.table("meds").add(c).then(a.fetchAllData())}},a.callbackPersonDelete=function(e){var t=Object(u.a)(Object(u.a)(a));v.table("meds").where("personId").equals(e).delete().then(function(){v.table("persons").where("id").equals(e).delete().then(function(){t.setState({mode:"list",personId:void 0,medicineId:void 0,control:void 0},function(){t.fetchAllData()})})})},a.callbackPersonAdd=function(e,t,n){var l={name:e,icon:t,color:n};v.table("persons").add(l).then(a.fetchAllData())},a.handleChangeName=function(e){a.setState({newUserName:e.target.value})},a.doChangeNewUserName=function(e){a.setState({newUserName:e.target.value})},a.doChangeNewUserIcon=function(e){a.setState({newUserIcon:e.target.value})},a.doChangeNewUserColor=function(e){a.setState({newUserColor:e.target.value})},a.fromDateToDateString=function(e){var t=e.getFullYear()+"-",a=e.getMonth();a<9&&(t+="0"),t+=a+1+"-";var n=e.getDate();return n<10&&(t+="0"),t+=n},a.today=function(){return a.fromDateToDateString(new Date)},a.state={units:["tablets(s)","ml"],mode:"list",control:void 0,personId:void 0,medicineId:void 0,version:"0.5.0.0",meds:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchAllData()}},{key:"isEmptyOrSpaces",value:function(e){return null===e||null!==e.match(/^ *$/)}},{key:"isSomething",value:function(e){return!(null===e||null!==e.match(/^ *$/))}},{key:"render",value:function(){var e=this;if("list"!==this.state.mode&&this.state.control){var t=void 0;return"person"===this.state.control?t=l.a.createElement(N,{onCancel:this.doCancelEdit,mode:this.state.mode,personId:this.state.personId,callbackPersonAdd:this.callbackPersonAdd,callbackPersonDelete:this.callbackPersonDelete}):"medicine"===this.state.control&&(t=l.a.createElement(f,{onCancel:this.doCancelEdit,mode:this.state.mode,personId:this.state.personId,medicineId:this.state.medicineId})),l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("div",{className:"App-header-div"},l.a.createElement("div",{className:"App-header-div-logo"},l.a.createElement("img",{src:h.a,className:"App-logo",alt:"logo"})),l.a.createElement("div",{className:"App-header-div-title"},l.a.createElement("h1",null,"Pharma")))),l.a.createElement("section",{className:"AppSection"},t),l.a.createElement("footer",{className:"App-footer"},l.a.createElement("div",{className:"App-footer-div"},l.a.createElement("div",{className:"App-footer-version"},l.a.createElement("p",{className:"App-footer-version"},"Version: ",l.a.createElement("span",{className:"App-footer-version"},this.state.version))),l.a.createElement("div",{className:"App-footer-copyright"},l.a.createElement("p",{className:"App-footer-copyright"},"\xa9 2019 molorosh")))))}var a=this.state.units.slice().map(function(e){return l.a.createElement("option",{key:e,value:e},e)}),n=null,r=null;this.state.persons&&(n=this.state.persons.slice().map(function(t){var n={backgroundColor:t.color},o=e.state.meds.slice();return r=o.map(function(a){if(a.personId===t.id){var n=l.a.createElement(l.a.Fragment,null);return e.isSomething(a.strength)&&(n=l.a.createElement("em",null,"(",a.strength,")")),l.a.createElement("div",{className:"pharma-person-medicine",key:a.id},l.a.createElement("p",{className:"pharma-person-medicine-edit"},l.a.createElement("button",{onClick:function(){e.doEditMedicine(t.id,a.id)},className:"pharma-btn pharma-btn-edit"},"Edit Medicine"),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){e.doRestockMedicine(t.id,a.id)},className:"pharma-btn pharma-btn-restock"},"Restock Medicine"),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){e.doDeleteMedicine(t.id,a.id)},className:"pharma-btn pharma-btn-delete"},"Delete Medicine")),l.a.createElement("p",null,l.a.createElement("strong",null,a.name)," ",n),l.a.createElement("p",null,a.scheduleAmount," ",a.units," every ",a.everyNdays," day(s)"),l.a.createElement("p",null,"days left: ",l.a.createElement("strong",null,a.daysLeft)," ",l.a.createElement("em",null,"(",a.until,")")))}}),l.a.createElement("div",{key:t.id,className:"pharma-person",style:n},l.a.createElement("p",{className:"pharma-delete-person-para"},l.a.createElement("button",{onClick:function(){e.doDeleteUser(t.id)},className:"pharma-btn pharma-btn-delete"},"delete person")),l.a.createElement("h1",null,t.icon," ",t.name),l.a.createElement("h4",null,l.a.createElement("span",{role:"img","aria-label":"Medicine"},"\ud83d\udc8a")," Medicines"),l.a.createElement("p",null,l.a.createElement("button",{onClick:function(){e.doEditMedicine(t.id,void 0)},className:"pharma-btn pharma-btn-add"},"Add Medicine")),l.a.createElement("div",{className:"pharma-add-new-medecine"},l.a.createElement("p",null,"name: ",l.a.createElement("input",{id:"newMedName_"+t.id,type:"text"})),l.a.createElement("p",null,"units: ",l.a.createElement("select",{defaultValue:"tablet(s)",id:"newMedUnits_"+t.id},a)),l.a.createElement("p",null,"strength: ",l.a.createElement("input",{size:"7",maxLength:"7",id:"newMedStrength_"+t.id,type:"text"})),l.a.createElement("p",null,"dose: ",l.a.createElement("input",{size:"7",maxLength:"7",id:"newMedDose_"+t.id,type:"text"})),l.a.createElement("p",null,"every",l.a.createElement("select",{defaultValue:"1",id:"newMedEveryNDays_"+t.id},l.a.createElement("option",{value:"1"},"1"),l.a.createElement("option",{value:"1"},"2"),l.a.createElement("option",{value:"1"},"3"),l.a.createElement("option",{value:"1"},"4"),l.a.createElement("option",{value:"1"},"5"),l.a.createElement("option",{value:"1"},"6"),l.a.createElement("option",{value:"1"},"7"))," days"),l.a.createElement("p",null,"stock level: ",l.a.createElement("input",{size:"7",maxLength:"7",id:"newMedStock_"+t.id,type:"text"})),l.a.createElement("p",null,l.a.createElement("button",{className:"pharma-btn pharma-btn-add",onClick:function(){var a="??",n=document.getElementById("newMedName_"+t.id);n&&(a=n.value,e.doAddNewMed(t.id,a))}},"Add"))),r)}));return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("div",{className:"App-header-div"},l.a.createElement("div",{className:"App-header-div-logo"},l.a.createElement("img",{src:h.a,className:"App-logo",alt:"logo"})),l.a.createElement("div",{className:"App-header-div-title"},l.a.createElement("h1",null,"Pharma")))),l.a.createElement("section",{className:"AppSection"},l.a.createElement("h3",null,l.a.createElement("span",{role:"img","aria-label":"People"},"\ud83d\udc65")," People"),l.a.createElement("p",null,l.a.createElement("button",{className:"pharma-btn pharma-btn-add",onClick:function(){e.doEditUser(void 0)}},"New Person")),l.a.createElement("div",null,n)),l.a.createElement("footer",{className:"App-footer"},l.a.createElement("div",{className:"App-footer-div"},l.a.createElement("div",{className:"App-footer-version"},l.a.createElement("p",{className:"App-footer-version"},"Version: ",l.a.createElement("span",{className:"App-footer-version"},this.state.version))),l.a.createElement("div",{className:"App-footer-copyright"},l.a.createElement("p",{className:"App-footer-copyright"},"\xa9 2019 molorosh")))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports=a.p+"static/media/logo.c695c8b2.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.e9bde38a.chunk.js.map