(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/logo.c695c8b2.svg"},12:function(e,t,a){e.exports=a(22)},17:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),o=a.n(s),l=(a(17),a(2)),i=a(3),c=a(6),u=a(4),h=a(5),d=a(1),m=a(10),p=a.n(m),v=new(a(11).a)("MoloroshPharmaDB");v.version(1).stores({persons:"++id"});var g=v,b=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"formatTo00",value:function(e){return e<10?"0"+e:e}},{key:"render",value:function(){var e=this,t=Array.from(Array(24).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),a=Array.from(Array(60).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),n=Array.from(Array(14).keys()).map(function(e){return r.a.createElement("option",{key:e+1,value:e+1},e+1)});return r.a.createElement("div",null,r.a.createElement("p",null,"key:",this.props.id,"| Hour:",this.props.hour,r.a.createElement("select",null,t),"| Minute:",this.props.minute,r.a.createElement("select",null,a),"| Every ",r.a.createElement("select",null,n)," Days | Amount:",this.props.amount,"| (",this.props.unit,") |",r.a.createElement("button",null,"Update"),"|",r.a.createElement("button",null,"Delete")))}}]),t}(n.Component),y=function(e){function t(e){var a;Object(l.a)(this,t);var n=void 0,r=void 0,s=void 0,o=void 0,i=void 0,h=(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).dateFromFormattedString(e.value);return null!==h&&(n=h.getHours(),r=h.getFullYear(),i=1+h.getMonth(),s=h.getMinutes(),o=h.getDate()),a.state={isEdit:e.isEdit,isEditable:e.isEditable,value:e.value,currentMinutes:s,currentHours:n,currentDay:o,currentMonth:i,currentYear:r},a.doEdit=a.doEdit.bind(Object(d.a)(Object(d.a)(a))),a.doCancel=a.doCancel.bind(Object(d.a)(Object(d.a)(a))),a.doUpdate=a.doUpdate.bind(Object(d.a)(Object(d.a)(a))),a.doChangeHours=a.doChangeHours.bind(Object(d.a)(Object(d.a)(a))),a.doChangeMinutes=a.doChangeMinutes.bind(Object(d.a)(Object(d.a)(a))),a.doChangeDay=a.doChangeDay.bind(Object(d.a)(Object(d.a)(a))),a.doChangeMonth=a.doChangeMonth.bind(Object(d.a)(Object(d.a)(a))),a.doChangeYear=a.doChangeYear.bind(Object(d.a)(Object(d.a)(a))),a.resetCurrentValues=a.resetCurrentValues.bind(Object(d.a)(Object(d.a)(a))),a.checkDayForValidity=a.checkDayForValidity.bind(Object(d.a)(Object(d.a)(a))),a.stringForCurrentDate=a.stringForCurrentDate.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"resetCurrentValues",value:function(){var e=void 0,t=void 0,a=void 0,n=void 0,r=void 0,s=this.dateFromFormattedString(this.state.value);null!==s&&(e=s.getHours(),t=s.getFullYear(),r=1+s.getMonth(),a=s.getMinutes(),n=s.getDate()),this.setState({currentMinutes:a,currentHours:e,currentDay:n,currentMonth:r,currentYear:t})}},{key:"stringForCurrentDate",value:function(){var e=this.state.currentYear,t=this.state.currentMonth,a=this.state.currentDay,n=this.state.currentHours,r=this.state.currentMinutes;return e+"-"+this.formatTo00(t)+"-"+this.formatTo00(a)+"T"+this.formatTo00(n)+":"+this.formatTo00(r)}},{key:"stringFromDateObject",value:function(e){var t=e.getFullYear(),a=1+e.getMonth(),n=e.getDate(),r=e.getHours(),s=e.getMinutes();return t+"-"+(a<10?"0"+a:a)+"-"+(n<10?"0"+n:n)+"T"+(r<10?"0"+r:r)+":"+(s<10?"0"+s:s)}},{key:"dateFromFormattedString",value:function(e){var t=Date.parse(e),a=null;return t!==Number.NaN&&(a=new Date(t)),a}},{key:"formatTo00",value:function(e){return e<10?"0"+e:e}},{key:"doEdit",value:function(){this.setState({isEdit:!0})}},{key:"doCancel",value:function(){this.resetCurrentValues(),this.setState({isEdit:!1})}},{key:"doUpdate",value:function(){var e=this.stringForCurrentDate();this.props.onChange(e),this.setState({isEdit:!1})}},{key:"doChangeHours",value:function(e){this.setState({currentHours:e.target.value})}},{key:"doChangeMinutes",value:function(e){this.setState({currentMinutes:e.target.value})}},{key:"doChangeYear",value:function(e){var t=this;this.setState({currentYear:e.target.value},function(){return t.checkDayForValidity()})}},{key:"doChangeMonth",value:function(e){var t=this;this.setState({currentMonth:e.target.value},function(){return t.checkDayForValidity()})}},{key:"doChangeDay",value:function(e){this.setState({currentDay:e.target.value})}},{key:"checkDayForValidity",value:function(){var e=31;void 0!==this.state.currentDay&&(e=this.daysInMonth(this.state.currentYear,this.state.currentMonth-1),parseInt(this.state.currentDay)>e&&this.setState({currentDay:e}))}},{key:"daysInMonth",value:function(e,t){var a=31,n=parseInt(t);if(8===n||4===n||6===n||10===n)a=30;else if(1===n){var r=parseInt(e);a=(r%100===0?r%400===0:r%4===0)?29:28}return a}},{key:"render",value:function(){var e=this,t=this.dateFromFormattedString(this.state.value),a=null;null!==t&&(a=this.stringFromDateObject(t));var n=r.a.createElement("span",{className:"editControl"}),s=r.a.createElement("span",{className:"readControl"});if(this.state.isEdit&&this.state.isEditable){var o=Array.from(Array(24).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),l=r.a.createElement("select",{onChange:this.doChangeHours,value:this.state.currentHours},o),i=Array.from(Array(60).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),c=r.a.createElement("select",{onChange:this.doChangeMinutes,value:this.state.currentMinutes},i),u=31;void 0!==this.state.currentDay&&(u=this.daysInMonth(this.state.currentYear,this.state.currentMonth-1));var h=Array.from(Array(u).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t+1},e.formatTo00(t+1))}),d=r.a.createElement("select",{onChange:this.doChangeDay,value:this.state.currentDay},h),m=Array.from(Array(12).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t+1},e.formatTo00(t+1))}),p=r.a.createElement("select",{onChange:this.doChangeMonth,value:this.state.currentMonth},m),v=[2018,2019,2020];void 0!==this.state.currentYear&&this.state.currentYear<2018&&v.unshift(this.state.currentYear);var g=v.map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),b=r.a.createElement("select",{onChange:this.doChangeYear,value:this.state.currentYear},g);n=r.a.createElement("span",null,r.a.createElement("p",null,r.a.createElement("span",{className:"pharma-control-title"},this.props.title),":",b,"-",p,"-",d,"T",l,":",c,r.a.createElement("button",{className:"pharma-btn pharma-btn-update",onClick:this.doUpdate},"Update"),r.a.createElement("button",{className:"pharma-btn pharma-btn-cancel",onClick:this.doCancel},"Cancel")))}else s=this.state.isEditable?r.a.createElement("span",null,r.a.createElement("p",null,r.a.createElement("span",{className:"pharma-control-title"},this.props.title),": ",a,r.a.createElement("button",{className:"pharma-btn pharma-btn-edit",onClick:this.doEdit},"Edit"))):r.a.createElement("span",null,r.a.createElement("p",null,r.a.createElement("span",{className:"pharma-control-title"},this.props.title),":  ",a));return r.a.createElement("div",null,n,s)}}]),t}(n.Component),f=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={name:"",unit:"",amount:28,timestamp:void 0,schedules:[],nextId:1,dummyDateString:"2008-08-28T23:30"},a.handleChangeUnit=a.handleChangeUnit.bind(Object(d.a)(Object(d.a)(a))),a.handleChangeName=a.handleChangeName.bind(Object(d.a)(Object(d.a)(a))),a.handleChangeAmount=a.handleChangeAmount.bind(Object(d.a)(Object(d.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(d.a)(Object(d.a)(a))),a.addNewSchedule=a.addNewSchedule.bind(Object(d.a)(Object(d.a)(a))),a.handleDrugScheduleDelete=a.handleDrugScheduleDelete.bind(Object(d.a)(Object(d.a)(a))),a.handleDrugScheduleUpdate=a.handleDrugScheduleUpdate.bind(Object(d.a)(Object(d.a)(a))),a.handleDatePickerChange=a.handleDatePickerChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleDatePickerChange",value:function(e){console.log("handleDatePickerChange(...)"),console.log("dateString:"),console.log(e),this.setState({dummyDateString:e},function(){console.log("finished update")})}},{key:"handleChangeUnit",value:function(e){this.setState({unit:e.target.value})}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangeAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"handleFormSubmit",value:function(e){e.preventDefault()}},{key:"addNewSchedule",value:function(){var e=this.state.nextId+1,t={hour:12,minute:20,amount:3,everyNdays:3,id:e};this.setState({schedules:this.state.schedules.concat(t),nextId:e})}},{key:"handleDrugScheduleDelete",value:function(e){alert("delete "+e)}},{key:"handleDrugScheduleUpdate",value:function(e,t,a,n,r){alert("upd8 "+e+" "+t+" "+a+" "+n+" "+r)}},{key:"render",value:function(){var e=this,t=this.props.units.slice(),a=this.state.schedules.slice();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("p",null,"name:",r.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChangeName})),r.a.createElement("p",null,"amount:",r.a.createElement("input",{type:"number",value:this.state.amount,onChange:this.handleChangeAmount}),r.a.createElement("select",{value:this.state.unit,onChange:this.handleChangeUnit},t.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e," (",t,")")}))),r.a.createElement("hr",null),r.a.createElement("h4",null,"DateTimePicker"),r.a.createElement("p",null,"date time data: ",this.state.dummyDateString),r.a.createElement(y,{title:"as at",isEdit:!1,isEditable:!0,value:this.state.dummyDateString,onChange:this.handleDatePickerChange,key:this.state.dummyDateString}),r.a.createElement("hr",null),r.a.createElement("h2",null,"Schedules"),r.a.createElement("p",null,r.a.createElement("button",{onClick:this.addNewSchedule},"Add Schedule")),a.map(function(t,a){return r.a.createElement(b,{key:t.id,id:t.id,hour:t.hour,minute:t.minute,amount:t.amount,unit:e.state.unit})})))}}]),t}(n.Component),E=(a(21),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={units:["pill(s)","mg","ml"],colors:["Pink","Orchid","Salmon","Orange","Khaki","Gainsboro"],icons:["\u06dd","\u06de","\u229c","\u229e","\u2299","\u2297"],newUserName:"",newUserColor:"Pink",newUserIcon:"\u06dd",version:"0.1.0.0"},a.handleChangeName=a.handleChangeName.bind(Object(d.a)(Object(d.a)(a))),a.doChangeNewUserName=a.doChangeNewUserName.bind(Object(d.a)(Object(d.a)(a))),a.doChangeNewUserColor=a.doChangeNewUserColor.bind(Object(d.a)(Object(d.a)(a))),a.doChangeNewUserIcon=a.doChangeNewUserIcon.bind(Object(d.a)(Object(d.a)(a))),a.doAddNewUser=a.doAddNewUser.bind(Object(d.a)(Object(d.a)(a))),a.fetchAllUsers=a.fetchAllUsers.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchAllUsers()}},{key:"isEmptyOrSpaces",value:function(e){return null===e||null!==e.match(/^ *$/)}},{key:"fetchAllUsers",value:function(){var e=this;g.table("persons").toArray().then(function(t){e.setState({persons:t})})}},{key:"doAddNewUser",value:function(){var e=this.state.newUserName,t=this.state.newUserColor,a=this.state.newUserIcon;if(!this.isEmptyOrSpaces(e)){var n={name:e,icon:a,color:t};g.table("persons").add(n).then(this.fetchAllUsers())}}},{key:"handleChangeName",value:function(e){this.setState({newUserName:e.target.value})}},{key:"doChangeNewUserName",value:function(e){this.setState({newUserName:e.target.value})}},{key:"doChangeNewUserIcon",value:function(e){this.setState({newUserIcon:e.target.value})}},{key:"doChangeNewUserColor",value:function(e){this.setState({newUserColor:e.target.value})}},{key:"render",value:function(){var e=this.state.units.slice(),t=this.state.colors.slice().map(function(e){var t={backgroundColor:e};return r.a.createElement("option",{style:t,key:e,value:e},e)}),a={backgroundColor:this.state.newUserColor},n=r.a.createElement("select",{style:a,onChange:this.doChangeNewUserColor,value:this.state.newUserColor},t),s=this.state.icons.slice().map(function(e){return r.a.createElement("option",{key:e,value:e},e)}),o=r.a.createElement("select",{onChange:this.doChangeNewUserIcon,value:this.state.newUserIcon},s),l=null;this.state.persons&&(l=this.state.persons.slice().map(function(e){var t={backgroundColor:e.color};return r.a.createElement("div",{key:e.id,className:"pharma-person",style:t},r.a.createElement("h1",null,e.icon,e.name),r.a.createElement("p",null,r.a.createElement("i",null,"id=",e.id)))}));return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"App-header-div"},r.a.createElement("div",{className:"App-header-div-logo"},r.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"})),r.a.createElement("div",{className:"App-header-div-title"},r.a.createElement("h1",null,"Pharma")))),r.a.createElement("section",{className:"AppSection"},r.a.createElement("h3",null,"People"),r.a.createElement("div",null,r.a.createElement("p",null,"initials:",r.a.createElement("input",{type:"text",size:"5",maxLength:"5",value:this.state.newUserName,onChange:this.doChangeNewUserName}),"color:",n,"icon:",o,r.a.createElement("button",{className:"pharma-btn pharma-btn-add",onClick:this.doAddNewUser},"Add")),l),r.a.createElement("hr",null),r.a.createElement("h3",null,"Drug"),r.a.createElement(f,{units:e})),r.a.createElement("footer",{className:"App-footer"},r.a.createElement("div",{className:"App-footer-div"},r.a.createElement("div",{className:"App-footer-version"},r.a.createElement("p",{className:"App-footer-version"},"Version: ",r.a.createElement("span",{className:"App-footer-version"},this.state.version))),r.a.createElement("div",{className:"App-footer-copyright"},r.a.createElement("p",{className:"App-footer-copyright"},"\xa9 2019 molorosh")))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,1,2]]]);
//# sourceMappingURL=main.172f8f87.chunk.js.map