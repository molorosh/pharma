{"version":3,"sources":["logo.svg","db.js","EditPerson.js","AppDal.js","EditMedicine.js","Documentation.js","About.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","db","Dexie","version","stores","persons","meds","EditPerson","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChangeName","event","setState","newUserName","target","value","doChangeNewUserName","doChangeNewUserIcon","newUserIcon","doChangeNewUserColor","newUserColor","doAttemptAddNewUser","n","state","c","i","errUserName","undefined","errorTally","isEmptyOrSpaces","callbackPersonAdd","personId","colors","icons","_this2","table","get","then","person","name","str","match","_this3","classFullname","title","content","otherButtons","slice","map","inlineStyles","backgroundColor","react_default","a","createElement","style","key","selectColorsStyle","selectColors","onChange","selectIcons","Fragment","className","colSpan","type","size","maxLength","onClick","mode","callbackPersonDelete","onCancel","Component","dal","fromDateToDateString","date","output","getFullYear","m","getMonth","d","getDate","today","Date","givePrn","medicineId","amount","current","console","log","newStock","newToday","changes","stockDate","stockAmount","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","where","equals","modify","stop","restockMedication","txtRestock","errors","lvl","push","msg","parseInt","toString","length","_callee2","_context2","mustBeSomething","strText","ret","isValid","isSomething","mustBePositiveInteger","intText","addMedication","dose","strength","everyNdays","units","restockValidation","nameValidation","doseValidation","strengthValidation","med","scheduleAmount","_callee3","_context3","add","deleteMedication","delete","EditMedecine","doChange_stockAmount","doChange_name","doChange_units","doChange_strength","doChange_stockDate","doChange_scheduleAmount","doChange_everyNdays","clearErrors","err_stockAmount","err_everyNdays","err_name","err_scheduleAmount","err_stockDate","err_strength","err_units","showErrors","x","xMax","processRestock","onRestock","processPrn","amnt","onPrn","processDelete","onDelete","processAdd","onAdd","unitList","dayList","that","actionButtons","actionListButtons","mainContent","strengthText","med_strength","medDescription","unitOptions","daysOptions","txt","doseText","err_prn","prn_stock","parseFloat","prn_dose","buttons","id","val","buttonObjects","Documentation","role","aria-label","href","doClose","About","rel","App","stripQueryString","document","location","url","questionMark","indexOf","newUrl","doShowPeople","docsMode","doShowHelp","doShowAbout","doEditMedicine","control","doDeleteMedicine","doRestockMedicine","doPrnMedicine","doCancelEdit","doEditUser","doDeleteUser","fetchOnlyUsers","toArray","fetchOnlyMeds","doMedsCalculations","fetchAllData","prn_doses","daysLeft","days","dayFrom","parse","now","UTC","getUTCFullYear","getUTCMonth","getUTCDate","until","valueOf","setDate","timeDiff","getTime","dayDiff","Math","ceil","callbackMedicineDelete","callbackMedicineRestock","callbackMedicinePrn","callbackMedicineAdd","assertThisInitialized","icon","color","editControl","src_EditPerson","EditMedicine","src_Documentation","src_About","src","logo","alt","personsHtml","medsHtml","prnButton","scheduleTxt","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","src_App_0","getElementById","URL","process","origin","addEventListener","concat","fetch","response","contentType","headers","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.4af3252b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.c695c8b2.svg\";","import Dexie from 'dexie';\n\n// for examples of using Dexie with React.js:\n// q.v. https://github.com/dfahlander/Dexie.js/blob/master/samples/react/src/db.js\n\nconst db = new Dexie('MoloroshPharmaDB');\n// needs to keep the older schemas so Dexie can \n// upgrade from the older version to the newer version\ndb.version(1).stores(\n    { \n        persons: '++id' \n    });\n// the latest version of the database schema\ndb.version(2).stores(\n    { \n        persons: '++id',\n        meds: '++id,personId' \n    });\n\nexport default db;\n\n// persons:\n//   ++id\n//   icon\n//   color\n//   name\n\n// meds\n//   ++id (1)\n//   personid (2)\n//   name (\"aspirin\")\n//   strength (\"500mg\")\n//   units (\"tablets\" of \"tablets\"/\"ml\")\n//   stockDate (\"2018-01-23\")\n//   stockAmount (23) \n//   scheduleAmount (2)\n//   everyNDays (1)\n//   predictedLastFullDoseDate (\"2018-05-01\")\n\n","import React, { Component } from 'react';\nimport db from './db';\n\nclass EditPerson extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            personId: props.personId,\n            newUserName: '',\n            newUserColor: \"Pink\",\n            newUserIcon: \"۝\",\n            errUserName: undefined,\n            colors: [\"Pink\",\"Orchid\",\"Salmon\",\"Orange\",\"Khaki\",\"Gainsboro\"],\n            icons: [\"۝\",\"۞\",\"⊜\",\"⊞\",\"⊙\",\"⊗\"],\n        };\n    }\n\n    // this is called before the \"render() method\n    componentDidMount() {\n        if(this.state.personId){\n            db.table('persons')\n                .get(this.state.personId)\n                .then((person) => {\n                    this.setState( { newUserName: person.name } )\n                });\n        }\n    }\n\n    isEmptyOrSpaces(str){\n        return str === null || str === undefined || str.match(/^ *$/) !== null;\n    }\n    \n    isSomething(str){\n        return !this.isEmptyOrSpaces(str);\n    }\n\n    handleChangeName = (event) => {\n        this.setState(\n            {newUserName: event.target.value}\n        );\n    }\n    \n    doChangeNewUserName = (event) => {\n        this.setState(\n            {newUserName: event.target.value}\n        );\n    }\n    \n    doChangeNewUserIcon = (event) => {\n        this.setState(\n            {newUserIcon: event.target.value}\n        );\n    }\n      \n    doChangeNewUserColor = (event) => {\n        this.setState(\n            {newUserColor: event.target.value}\n        );\n    }\n\n    doAttemptAddNewUser = () => {\n        const n = this.state.newUserName;\n        const c = this.state.newUserColor;\n        const i = this.state.newUserIcon;\n        let errUserName = undefined;\n        let errorTally = 0;\n        if(this.isEmptyOrSpaces(n)){\n            errUserName = \"Please enter intitials (or nickname)\";\n            errorTally++;\n        }\n        this.setState(\n            {\n                errUserName\n            },\n            () => {\n                if(errorTally === 0){\n                    this.props.callbackPersonAdd(n, i, c);\n                }\n            }\n        );\n    }\n\n    render(){\n        let classFullname = \"pharma-person-control\";\n        let title = \"\";\n        let content = undefined;\n        let otherButtons = undefined;\n        if(this.props.personId === undefined){\n            classFullname += \" pharma-person-add\"\n            title = \"Add New Person\";\n            const cc = this.state.colors.slice();\n            const colors = cc.map(\n                (n) => {\n                let inlineStyles={backgroundColor: n};\n                return (<option style={inlineStyles} key={n} value={n}>{n}</option>);\n                });\n            let selectColorsStyle={\n            backgroundColor: this.state.newUserColor\n            };\n            let selectColors = <select style={selectColorsStyle} onChange={this.doChangeNewUserColor} value={this.state.newUserColor}>\n                {colors}\n            </select>\n            const ii = this.state.icons.slice();\n            const icons = ii.map((n) => <option key={n} value={n}>{n}</option>);\n            let selectIcons = <select onChange={this.doChangeNewUserIcon} value={this.state.newUserIcon}>\n                {icons}\n            </select>\n            content = (\n                <>\n                    <table className=\"pharma-edit-layout\">\n                        <tbody>\n                            <tr>\n                                <td colSpan=\"2\" className=\"pharma-edit-layout-error\">\n                                    {this.state.errUserName}\n                                </td>\n                            </tr>\n                            <tr>\n                                <td className=\"pharma-edit-layout-label\">\n                                    initials:\n                                </td>\n                                <td className=\"pharma-edit-layout-control\">\n                                    <input type=\"text\" size=\"5\" maxLength=\"5\" value={this.state.newUserName} onChange={this.doChangeNewUserName} />\n                                </td>\n                            </tr>\n                            <tr>\n                                <td colSpan=\"2\" className=\"pharma-edit-layout-error\">\n\n                                </td>\n                            </tr>\n                            <tr>\n                                <td className=\"pharma-edit-layout-label\">\n                                    color:\n                                </td>\n                                <td className=\"pharma-edit-layout-control\">\n                                    {selectColors}\n                                </td>\n                            </tr>\n                            <tr>\n                                <td colSpan=\"2\" className=\"pharma-edit-layout-error\">\n                                    \n                                </td>\n                            </tr>\n                            <tr>\n                                <td className=\"pharma-edit-layout-label\">\n                                    icons:\n                                </td>\n                                <td className=\"pharma-edit-layout-control\">\n                                    {selectIcons}\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </>\n            );\n            otherButtons = (<button \n                onClick={this.doAttemptAddNewUser} \n                className=\"pharma-btn pharma-btn-add\"\n                >\n                Add New Person\n            </button>);\n        }else if(this.props.mode === \"delete\"){\n            classFullname += \" pharma-person-delete\"\n            title = \"Delete Person and Medicines\"\n            content = (\n                <>\n                    <p>person to delete: <strong>{this.state.newUserName}</strong></p>\n                </>\n            );\n            otherButtons = (<button \n                onClick={\n                    () => {\n                        this.props.callbackPersonDelete(this.state.personId);\n                    }\n                }\n                className=\"pharma-btn pharma-btn-delete\"\n                >\n                Delete [{this.state.newUserName}]\n            </button>);\n        }else{\n            classFullname += \" pharma-person-edit\"\n            title = \"Edit Person\";\n        }\n        return (\n            <div className={classFullname}>\n                <h3><code>{title}</code></h3>\n                {content}\n                <p>\n                    <button \n                        onClick={this.props.onCancel} \n                        className=\"pharma-btn pharma-btn-cancel\"\n                        >\n                        Cancel\n                    </button>\n                    {otherButtons}\n                </p>\n            </div>\n        );\n    }\n}\n\nexport default EditPerson;","import db from './db';\n// TODO - at some point should split this into a Business Logic Layer\n// and a (hidden) Data Access Layer\nclass AppDal {\n    \n    isEmptyOrSpaces(str){\n        return str === null || str === undefined || str.match(/^ *$/) !== null;\n    }\n    \n    isSomething(str){\n        return !this.isEmptyOrSpaces(str);\n    }\n    \n    fromDateToDateString = (date) => {\n        let output = date.getFullYear() + '-';\n        let m = date.getMonth();\n        if(m < 9){\n            output += '0'\n        }\n        output += (m + 1) + '-';\n        let d = date.getDate();\n        if(d < 10){\n            output += '0'\n        }\n        output += d;\n        return output;\n    }\n\n    today = () => {\n        return(this.fromDateToDateString(new Date()));\n    }\n\n    givePrn = (medicineId, amount, current) => {\n        console.log(\"DAL: givePrn(\" + medicineId + \",\" + amount + \",\" + current + \")\");\n        let errors = [];\n        let newStock = current - amount;\n        let newToday = this.today();\n        console.log(\"DAL: newStock = \" + newStock);\n        console.log(\"DAL: newToday = \" + newToday);\n        let changes = {\n            stockDate: newToday,\n            stockAmount: newStock\n        };\n        (async () => {\n            await db.table(\"meds\")\n                .where(\":id\")\n                .equals(medicineId)\n                .modify(changes);\n        })();\n        return errors;\n    }\n\n    restockMedication = (medicineId, txtRestock) => {\n        let errors = [];\n        let lvl = undefined;\n        if(this.isEmptyOrSpaces(txtRestock)){\n            errors.push({name: \"err_stockAmount\", msg: \"You must supply a restock level\" });\n        }else{\n            lvl = parseInt(txtRestock, 10);\n            if(lvl && lvl.toString && lvl.toString() === txtRestock){\n                if(lvl < 1){\n                    errors.push({name: \"err_stockAmount\", msg: \"Restock level must be more than zero\" });\n                }\n            }else{\n                errors.push({name: \"err_stockAmount\", msg: \"You must supply a valid restock level\" });\n            }\n        }\n        if(errors.length === 0){\n            // do the update\n            let changes = {\n                stockDate: this.today(),\n                stockAmount: lvl\n            };\n            (async () => {\n                await db.table(\"meds\")\n                    .where(\":id\")\n                    .equals(medicineId)\n                    .modify(changes);\n            })();\n        }\n        return errors;\n    }\n\n    mustBeSomething = (strText, name) => {\n        let ret = { \n            isValid: false,\n            value: undefined,\n            msg: undefined\n        }\n        if(!this.isSomething(strText)){\n            ret.msg = \"You must supply a \" + name;\n        }else{\n            ret.isValid = true;\n            ret.value = strText;\n        }\n        return ret;\n    }\n\n    mustBePositiveInteger = (intText, name) => {\n        let ret = { \n            isValid: false,\n            value: undefined,\n            msg: undefined\n        }\n        let lvl = undefined;\n        if(this.isEmptyOrSpaces(intText)){\n            ret.msg = \"You must supply a \" + name;\n        }else{\n            lvl = parseInt(intText, 10);\n            if(lvl && lvl.toString && lvl.toString() === intText){\n                if(lvl < 1){\n                    ret.msg = name + \" must be more than zero\";\n                }\n                else{\n                    ret.isValid = true;\n                    ret.value = lvl;\n                }\n            }else{\n                ret.msg = \"You must supply a valid \" + name;\n            }\n        }\n        return ret;\n    }\n\n    addMedication = (\n        personId, \n        name,\n        stockAmount,\n        dose,\n        strength,\n        everyNdays,\n        units\n        ) => {\n        let errors = [];\n        let restockValidation = this.mustBePositiveInteger(stockAmount, \"Stock Amount\");\n        if(!restockValidation.isValid){\n            errors.push({name: \"err_stockAmount\", msg: restockValidation.msg });\n        }\n        let nameValidation = this.mustBeSomething(name, \"Medicine Name\");\n        if(!nameValidation.isValid){\n            errors.push({name: \"err_name\", msg: nameValidation.msg});\n        }\n        let doseValidation = this.mustBePositiveInteger(dose, \"Dose\");\n        if(!doseValidation.isValid){\n            errors.push({name: \"err_scheduleAmount\", msg: doseValidation.msg });\n        }\n        let strengthValidation = this.mustBeSomething(strength, \"Strength\");\n        if(!strengthValidation.isValid){\n            errors.push({name: \"err_strength\", msg: strengthValidation.msg});\n        }\n        if(errors.length === 0){\n            const med = {\n                personId: personId,\n                name: nameValidation.value,\n                strength: strengthValidation.value,\n                units: units,\n                stockDate: this.today(),\n                stockAmount: restockValidation.value,\n                scheduleAmount: doseValidation.value,\n                everyNdays: everyNdays\n              };\n              (async () => {\n                db.table('meds')\n                    .add(med);\n              })();\n        }\n        return errors;\n    }\n\n    deleteMedication = (medicineId) => {\n        let errors = [];\n        db.table(\"meds\")\n            .where(\"id\")\n            .equals(medicineId)\n            .delete();\n        return errors;\n    }\n\n}\n\nconst dal = new AppDal();\n\nexport default dal;","import React, { Component } from 'react';\nimport db from './db';\nimport dal from './AppDal';\n\nclass EditMedecine extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            unitList: [\"tablets(s)\",\"ml\"],\n            dayList: [\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\"],\n            personId: props.personId,\n            medicineId: props.medicineId,\n            name: '',\n            strength: '',\n            stockDate: '',\n            units: '',\n            stockAmount: '',\n            scheduleAmount: '',\n            everyNdays: '',\n            err_name: '',\n            err_strength: '',\n            err_stockDate: '',\n            err_units: '',\n            err_stockAmount: '',\n            err_scheduleAmount: '',\n            err_everyNdays: '',\n        };\n    }\n\n    isEmptyOrSpaces(str){\n        return str === null || str === undefined || str.match(/^ *$/) !== null;\n    }\n    \n    isSomething(str){\n        return !this.isEmptyOrSpaces(str);\n    }\n\n    componentDidMount(){\n        if(this.state.medicineId && this.state.medicineId > 0){\n            let that = this;\n            db.table(\"meds\").get(this.state.medicineId)\n            .then(function(med){\n                that.setState({\n                    name: med.name,\n                    strength: med.strength,\n                    units: med.units,\n                    stockDate: med.stockDate,\n                    stockAmount: (that.props.mode === \"restock\") ? '' : med.stockAmount,\n                    scheduleAmount: med.scheduleAmount,\n                    everyNdays: med.everyNdays\n                });\n            });\n        }else{\n            this.setState({\n                units: this.state.unitList[0],\n                everyNdays: this.state.dayList[0]\n            });\n        }\n    }\n\n    doChange_stockAmount = (event) => {\n        this.setState(\n            {stockAmount: event.target.value}\n        );\n    }\n\n    doChange_name = (event) => {\n        this.setState(\n            {name: event.target.value}\n        );\n    }\n    \n    doChange_units = (event) => {\n        this.setState(\n            {units: event.target.value}\n        );\n    }\n    \n    doChange_strength = (event) => {\n        this.setState(\n            {strength: event.target.value}\n        );\n    }\n\n    doChange_stockDate = (event) => {\n        this.setState(\n            {stockDate: event.target.value}\n        );\n    }\n\n    doChange_scheduleAmount = (event) => {\n        this.setState(\n            {scheduleAmount: event.target.value}\n        );\n    }\n\n    doChange_everyNdays = (event) => {\n        this.setState(\n            {everyNdays: event.target.value}\n        );\n    }\n\n    clearErrors = () => {\n        this.setState({\n            err_stockAmount: '',\n            err_everyNdays: '',\n            err_name: '',\n            err_scheduleAmount: '',\n            err_stockDate: '',\n            err_strength: '',\n            err_units: ''\n        });\n    }\n\n    showErrors = (errors) => {\n        if(errors && errors.length){\n            let changes = {};\n            for(let x = 0, xMax = errors.length; x < xMax; x++){\n                changes[errors[x].name] = errors[x].msg;\n            }\n            this.setState(changes);\n        }\n    }\n\n    processRestock = () => {\n        this.clearErrors();\n        let errors = dal.restockMedication(this.state.medicineId, this.state.stockAmount);\n        if(errors.length === 0){\n            this.props.onRestock();\n        }else{\n            this.showErrors(errors);\n        }\n    }\n\n    processPrn = (amnt) => {\n        console.log(\"processPrn(\" + amnt + \")\");\n        this.clearErrors();\n        let errors = dal.givePrn(this.state.medicineId, amnt, this.state.stockAmount);\n        if(errors.length === 0){\n            this.props.onPrn();\n        }else{\n            this.showErrors(errors);\n        }\n    }\n\n    processDelete = () => {\n        this.clearErrors();\n        let errors = dal.deleteMedication(this.state.medicineId);\n        if(errors.length === 0){\n            this.props.onDelete();\n        }else{\n            this.showErrors(errors);\n        }\n    }\n\n    processAdd = () => {\n        this.clearErrors();\n        let errors = dal.addMedication(\n                this.state.personId,\n                this.state.name,\n                this.state.stockAmount,\n                this.state.scheduleAmount,\n                this.state.strength,\n                this.state.everyNdays,\n                this.state.units\n            );\n        console.log(errors);\n        if(errors.length === 0){\n            this.props.onAdd();\n        }else{\n            this.showErrors(errors);\n        }\n    }\n\n    render(){\n        let classFullname = \"pharma-medicine-control\";\n        let title = \"\";\n        let actionButtons = <></>;\n        let actionListButtons = <></>;\n        let mainContent = <></>;\n        let strengthText = (<></>);\n        if(this.isSomething(this.state.med_strength)){\n          strengthText = (<em>({this.state.med_strength})</em>);\n        }\n        let medDescription = <p><strong>{this.state.name}</strong> {strengthText}</p>;\n        if(this.props.medicineId === undefined){\n            classFullname += \" pharma-medicine-add\"\n            title = \"Add New Medicine\";\n            actionButtons = (<>\n                <button \n                    onClick={this.processAdd} \n                    className=\"pharma-btn pharma-btn-add\"\n                >\n                    Add\n                </button>\n            </>);\n            const units = this.state.unitList.slice();\n            const unitOptions = units.map(\n            (a) => {\n                return (<option key={a} value={a}>{a}</option>)\n            }\n            );\n            const days = this.state.dayList.slice();\n            const daysOptions = days.map(\n                (a) => {\n                    let txt = \"\";\n                    if(a === \"0\"){\n                        txt = \"PRN (take as required)\";\n                    }else if(a === \"1\"){\n                        txt = \"Every Day\";\n                    }else{\n                        txt = \"Every \" + a + \" Days\";\n                    }\n                    return (<option key={a} value={a}>{txt}</option>)\n                }\n            );\n            const doseText =  this.state.everyNdays === \"0\"? \"minimum dose\" : \"dose\";\n            mainContent = (<>\n                <table className=\"pharma-edit-layout\">\n                    <tbody>\n                        <tr>                        \n                            <td colSpan=\"2\" className=\"pharma-edit-layout-error\">\n                                {this.state.err_name}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td className=\"pharma-edit-layout-label\">\n                                name:\n                            </td>\n                            <td className=\"pharma-edit-layout-control\">\n                                <input type=\"text\" value={this.state.name} onChange={this.doChange_name} />\n                            </td>\n                        </tr> \n                        <tr>                   \n                            <td colSpan=\"2\" className=\"pharma-edit-layout-error\">\n                                {this.state.err_units}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td className=\"pharma-edit-layout-label\">\n                                units:\n                            </td>\n                            <td className=\"pharma-edit-layout-control\">\n                                <select onChange={this.doChange_units} value={this.state.units}>\n                                    {unitOptions}\n                                </select>\n                            </td>\n                        </tr>\n                        <tr>                        \n                           <td colSpan=\"2\" className=\"pharma-edit-layout-error\">\n                                {this.state.err_strength}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td className=\"pharma-edit-layout-label\">\n                                strength:\n                            </td>\n                            <td className=\"pharma-edit-layout-control\">\n                                <input type=\"text\" value={this.state.strength} onChange={this.doChange_strength} />\n                            </td>\n                        </tr>\n                        <tr>\n                            <td className=\"pharma-edit-layout-label\">\n                                schedule:\n                            </td>\n                            <td className=\"pharma-edit-layout-control\">\n                                <select onChange={this.doChange_everyNdays} value={this.state.everyNdays} >\n                                    {daysOptions}\n                                </select>\n                            </td>\n                            <td className=\"pharma-edit-layout-error\">\n                                {this.state.err_everyNdays}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td colSpan=\"2\" className=\"pharma-edit-layout-error\">\n                                {this.state.err_scheduleAmount}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td className=\"pharma-edit-layout-label\">\n                                {doseText}:\n                            </td>\n                            <td className=\"pharma-edit-layout-control\">\n                                <input type=\"text\" value={this.state.scheduleAmount} onChange={this.doChange_scheduleAmount} />\n                                &nbsp;\n                                {this.state.units}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td colSpan=\"2\" className=\"pharma-edit-layout-error\">\n                                {this.state.err_stockAmount}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td className=\"pharma-edit-layout-label\">\n                                stock level:\n                            </td>\n                            <td className=\"pharma-edit-layout-control\">\n                                <input type=\"text\" size=\"5\" maxLength=\"5\" value={this.state.stockAmount} onChange={this.doChange_stockAmount} />\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>  \n            </>);\n        }else if(this.props.mode === \"delete\"){\n            classFullname += \" pharma-medicine-delete\";\n            title = \"Delete Medicine\";\n            mainContent = (<>\n                <p>You have chosen to delete the following medication:</p>\n                {medDescription}\n                <p>{this.state.scheduleAmount} {this.state.units} every {this.state.scheduleAmount} days</p>\n            </>);\n            actionButtons = (<>\n                <button key={\"d\"}\n                    onClick={this.processDelete} \n                    className=\"pharma-btn pharma-btn-delete\"\n                >\n                    Delete\n                </button>\n            </>);\n        }else if(this.props.mode === \"prn\"){\n            classFullname += \" pharma-medicine-prn\"\n            title = \"Give PRN\";\n            mainContent = (<>\n                <p>You have chosen to give the following medication as PRN:</p>\n                {medDescription}\n                <p className=\"pharma-edit-layout-error\">{this.state.err_prn}</p>\n                </>\n            );\n            let prn_stock = parseFloat(this.state.stockAmount);\n            let prn_dose = parseFloat(this.state.scheduleAmount);\n            let buttons = [];\n            for(let x = 1; x < 5; x++){\n                if(x * prn_dose <= prn_stock){\n                    buttons.push( { id: x, val: x * prn_dose, key: x } );\n                }\n            }\n            let that = this;\n            const buttonObjects = buttons.map(\n                (a) => {\n                    return (\n                        <li key={a.id.toString()}>\n                            <button \n                                onClick={\n                                    function(){ \n                                        that.processPrn(a.val); \n                                    } \n                                } \n                                className=\"pharma-btn pharma-btn-prn\"\n                            >\n                                Give {a.val} {this.state.units}\n                            </button>\n                        </li>\n                    )\n                }\n                );\n            actionListButtons = (<ul className=\"plain-list\">{buttonObjects}</ul>);\n        }else if(this.props.mode === \"restock\"){\n            classFullname += \" pharma-medicine-restock\"\n            title = \"Restock Medicine\"\n            mainContent = (<>\n                <p>You have chosen to restock the following medication:</p>\n                {medDescription}\n                <p>{this.state.scheduleAmount} {this.state.units} every {this.state.scheduleAmount} days</p>\n                <p>Please enter the stock level at the <u>start</u> of <u>today</u></p>\n                <table className=\"pharma-edit-layout\">\n                    <tbody>\n                        <tr>\n                            <td className=\"pharma-edit-layout-label\">\n                                Stock amount:\n                            </td>\n                            <td className=\"pharma-edit-layout-control\">\n                                <input type=\"text\" size=\"5\" maxLength=\"5\" value={this.state.stockAmount} onChange={this.doChange_stockAmount} />\n                            </td>\n                            <td className=\"pharma-edit-layout-error\">\n                                {this.state.err_stockAmount}\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>          \n            </>);\n            actionButtons = (<>\n                <button key=\"rstck\"\n                    onClick={this.processRestock} \n                    className=\"pharma-btn pharma-btn-restock\"\n                >\n                    Restock\n                </button>\n            </>);\n        }else{\n            title = \"Edit Medicine\";\n            classFullname += \" pharma-medicine-edit\"\n        }\n        return (\n            <div className={classFullname}>\n                <h3><code>{title}</code></h3>\n                {mainContent}\n                <p>\n                    <button \n                        onClick={this.props.onCancel} \n                        className=\"pharma-btn pharma-btn-cancel\"\n                        >\n                        Cancel\n                    </button>\n                    {actionButtons}\n                </p>\n                <ul>{actionListButtons}</ul>\n            </div>\n        );\n    }\n}\n\nexport default EditMedecine;","import React, { Component } from 'react';\nimport './App.css';\n\nclass Documentation extends Component {\n\n    render(){\n        return (\n            <div className=\"theHelpDiv\">\n                <h3><span className=\"emoji-prefix\" role=\"img\" aria-label=\"Help\">❓</span>Help</h3>\n                <h4><span className=\"emoji-prefix\" role=\"img\" aria-label=\"Purpose\">🐬</span>Purpose</h4>\n                <p>\n                    This is a small web app to track multiple medication prescriptions for one or more people, \n                    and to show when medicines are predicted to run out.\n                </p>\n                <h4><span className=\"emoji-prefix\" role=\"img\" aria-label=\"Instructions\">📖</span>Instructions</h4>\n                <p>\n                    The <b>New Person</b> button lets you create a new person.  No need to give the full name, \n                    just initials or a nickname will do.</p>\n                    <p>\n                    The <b>Add Medicine</b> button lets you add a medication for a person.  Just fill out the \n                    details and it will work how many full days of days are left before you must get another \n                    prescription.  If the person has several pills throughout the day, just give the daily total.\n                </p>\n                <p>\n                    The <b>Give PRN</b> button lets you give multiples of the minimum PRN dose.  As PRN does not\n                    follow a definate schedule, we don't show predictions for the end of PRN stock,  \n                    but do indicate the number of minimum doses available.\n                </p>\n                <p>\n                    The <b>Restock Medicine</b> button lets you correct the amount of a medicine.  Please enter the \"new\" \n                    stock leval at the start of the day (i.e. include, as stock, any meds you have already given <u>today</u>).\n                </p>\n                <p>\n                    The <b>Delete Medicine</b> button will allow you to remove a medication from a user.\n                </p>\n                <p>\n                    The <b>Delete Person</b> button will allow you to remove a person and all their medication\n                     from the web app.\n                </p>\n                <h4><span className=\"emoji-prefix\" role=\"img\" aria-label=\"Warning\">⚠️</span>Oops!</h4>\n                <p>\n                    Deletions (and Additions and Restocks) always go to a confirmation screen, so don't worry \n                    about accididentally hitting a button - just click the <b>Cancel</b> button.\n                </p>\n                <h4><span className=\"emoji-prefix\" role=\"img\" aria-label=\"Data\">💾</span>Data</h4>\n                <p>\n                    Because medication details are highly personal medical data, \n                    this app does not store any data remotely.  \n                    All prescription and stock level data is stored locally \n                    on the phone or tablet or computer you are currently looking at.\n                </p>\n                <p>\n                    This does however mean that if you set up all the information on your phone, \n                    it will not appear in your tablet, so please take a moment to choose if it's \n                    best for you to keep the information on your personal smartphone,\n                     or on a shared tablet or computer.\n                </p>\n                <h4><span className=\"emoji-prefix\" role=\"img\" aria-label=\"Email\">📧</span>Feedback</h4>\n                <p>\n                    The app email address is: <a href=\"mailto:pharma@molorosh.com\">pharma@molorosh.com</a>.\n                    Please feel free to send an email with any feedback, comments, problems, \n                    questions or new feature suggestions.\n                </p>\n                <h4><span className=\"emoji-prefix\" role=\"img\" aria-label=\"Crystal Ball\">🔮</span>Future Features</h4>\n                <p>\n                    We are looking to introduce an import / export / backup process to allow you \n                    to transfer per-person medication records from one device to another.\n                </p>\n                <h4><span className=\"emoji-prefix\" role=\"img\" aria-label=\"Free of Charge\">🈚</span>Free of Charge</h4>\n                <p>\n                    This web app is free to use and always will be :-)\n                </p>\n                <p>\n                    <button \n                        onClick={this.props.doClose} \n                        className=\"pharma-btn pharma-btn-cancel\"\n                        >\n                        Close\n                    </button>\n                </p>\n            </div>\n        );\n    }\n\n}\n\nexport default Documentation;","import React, { Component } from 'react';\nimport './App.css';\n\nclass About extends Component {\n    \n    render(){\n        return (\n            <div className=\"theAboutDiv\">\n                <h3><span className=\"emoji-prefix\" role=\"img\" aria-label=\"About\">📜</span> About</h3>\n                <p>This web app was written by <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://www.molorosh.com\">molorosh</a>.</p>\n                <p>If you're a geeky kinda person the source code for the web app is viewable on <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/molorosh/pharma\">github</a></p>\n                <h3><span className=\"emoji-prefix\" role=\"img\" aria-label=\"About\">⏳</span> Release History</h3>\n                <h4>V 1.0.0.0 @ 6 May 2019</h4>\n                <ul>\n                    <li>The initial version of the app was published.</li>\n                </ul>\n                <h4>V 1.1.0.0 @ 15 August 2021</h4>\n                <ul>\n                    <li>Some UX updates were made to the application.</li>\n                </ul>\n                <p>&copy; 2021 molorosh</p>\n                <p>\n                    <button \n                        onClick={this.props.doClose} \n                        className=\"pharma-btn pharma-btn-cancel\"\n                        >\n                        Close\n                    </button>\n                </p>\n            </div>\n        );\n    }\n\n}\n\nexport default About;","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport db from './db';\nimport './App.css';\nimport EditPerson from './EditPerson';\nimport EditMedicine from './EditMedicine';\nimport Documentation from './Documentation';\nimport About from './About';\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n        // docsMode: 'people','help','about'\n        docsMode: 'people',\n        // mode: 'list','edit','delete','add','restock','prn'\n        mode: 'list',\n        // control: 'undefined', 'person', 'medicine'\n        control: undefined,\n        // personId: the primary key of the person to be added, edited or deleted\n        personId: undefined,\n        // medicineId: the primary key of the medicine to be added, edited or deleted\n        medicineId: undefined,\n        version: \"1.1.0.0\",\n        meds: [],\n    }\n  }\n\n  stripQueryString = () => {\n    if(document.location && document.location.href){\n      let url = document.location.href;\n      if(this.isSomething(url)){\n        let questionMark = url.indexOf('?');\n        if(questionMark > 0){\n          let newUrl = url.slice(0, questionMark);\n          document.location = newUrl;\n        }\n      }\n    }\n  };\n\n  // this is called before the \"render() method\n  componentDidMount() {\n    this.stripQueryString();\n    this.fetchAllData();\n  }\n\n  isEmptyOrSpaces(str){\n    return str === null || str === undefined || str.match(/^ *$/) !== null;\n  }\n\n  isSomething(str){\n      return !this.isEmptyOrSpaces(str);\n  }\n\n  doShowPeople = () => {\n    this.setState(\n      {\n        docsMode: 'people',\n      }\n    );\n  }\n\n  doShowHelp = () => {\n    this.setState(\n      {\n        docsMode: 'help'\n      }\n    );\n  }\n\n  doShowAbout = () => {\n    this.setState(\n      {\n        docsMode: 'about'\n      }\n    );\n  }\n\n  doEditMedicine = (personId, medicineId) => {\n    this.setState(\n      {\n        mode: 'edit',\n        personId: personId,\n        medicineId: medicineId,\n        control: 'medicine'\n      }\n    );\n  }\n\n  doDeleteMedicine = (personId, medicineId) => {\n    console.log(\"doDeleteMedicine(\" + personId + \",\" + medicineId + \")\");\n    this.setState(\n      {\n        mode: 'delete',\n        personId: personId,\n        medicineId: medicineId,\n        control: 'medicine'\n      }\n    );\n  }\n\n  doRestockMedicine = (personId, medicineId) => {\n    console.log(\"doRestockMedicine(\" + personId + \",\" + medicineId + \")\");\n    this.setState(\n      {\n        mode: 'restock',\n        personId: personId,\n        medicineId: medicineId,\n        control: 'medicine'\n      }\n    );\n  }\n\n  doPrnMedicine = (personId, medicineId) => {\n    console.log(\"doPrn(\" + personId + \",\" + medicineId + \")\");\n    this.setState(\n      {\n        mode: 'prn',\n        personId: personId,\n        medicineId: medicineId,\n        control: 'medicine'\n      }\n    );\n  }\n\n  doCancelEdit = () => {\n    this.setState(\n      {\n        mode: 'list',\n        personId: undefined,\n        medicineId: undefined,\n        control: undefined\n      }\n    );\n  }\n\n  doEditUser = (personId) => {\n    this.setState(\n      {\n        mode: 'edit',\n        personId: personId,\n        medicineId: undefined,\n        control: 'person'\n      }\n    );\n  }\n\n  doDeleteUser = (personId) => {\n    this.setState(\n      {\n        mode: 'delete',\n        personId: personId,\n        medicineId: undefined,\n        control: 'person'\n      }\n    );\n  }\n\n  fetchOnlyUsers = () => {\n    db.table('persons')\n      .toArray()\n      .then((persons) => {\n        this.setState( { persons } )\n      });\n  }\n\n  fetchOnlyMeds = () => {\n    db.table('meds')\n      .toArray()\n      .then((meds) => {\n        if(meds && meds.length){\n          for(let x = 0, xMax = meds.length; x < xMax; x++){\n            this.doMedsCalculations(meds[x]);\n          }\n        }\n        this.setState( { meds } )\n      });\n  }\n\n  fetchAllData = () => {\n    // although this works, it should be \n    // re-written to use Dexie \"all\" promise API\n    // so we only update the React state once at the end\n    db.table('persons')\n      .toArray()\n      .then((persons) => {\n        this.setState( { persons, mode: 'list' }, this.fetchOnlyMeds() )\n      });\n  }\n\n  doMedsCalculations = (med) => {\n    if(med.everyNdays === \"0\"){\n      // PRN (take as required)\n      let prn_doses = med.stockAmount / med.scheduleAmount;\n      med.daysLeft = parseInt(prn_doses);\n    }else {\n      let doses = med.stockAmount / med.scheduleAmount; \n      let days = doses * med.everyNdays;\n      let dayFrom = new Date(Date.parse(med.stockDate + \"T00:00:00Z\"));\n      let now = new Date();\n      let today = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate() ));\n      let until = new Date(dayFrom.valueOf());\n      until.setDate(until.getDate() + days);\n      let timeDiff = (until.getTime() - today.getTime());\n      let dayDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n      med.daysLeft = dayDiff;\n      med.until = this.fromDateToDateString(until);\n    }\n  }\n\n  callbackMedicineDelete = () => {\n    this.fetchAllData();\n  }\n\n  callbackMedicineRestock = () => {\n    this.fetchAllData();\n  }\n\n  callbackMedicinePrn = () => {\n    this.fetchAllData();\n  }\n\n  callbackMedicineAdd = () => {\n    this.fetchAllData();\n  }\n\n  callbackPersonDelete = (id) => {\n    // delete the medicines, then the person\n    let that = this;\n    db.table('meds')\n      .where('personId')\n      .equals(id)\n      .delete()\n      .then(function(){\n        db.table('persons').where('id')\n        .equals(id)\n        .delete()\n        .then(function(){\n          that.setState(\n            {\n              mode: 'list',\n              personId: undefined,\n              medicineId: undefined,\n              control: undefined\n            }, \n            () => { that.fetchAllData(); });\n        })\n      })\n  }\n\n  callbackPersonAdd = (name,icon,color) => {\n    const person = {\n      name: name,\n      icon: icon,\n      color: color\n    };\n    db.table('persons')\n      .add(person)\n      .then(this.fetchAllData());\n  }\n\n  handleChangeName = (event) => {\n    this.setState(\n      {newUserName: event.target.value}\n    );\n  }\n\n  doChangeNewUserName = (event) => {\n    this.setState(\n      {newUserName: event.target.value}\n    );\n  }\n\n  doChangeNewUserIcon = (event) => {\n    this.setState(\n      {newUserIcon: event.target.value}\n    );\n  }\n  \n  doChangeNewUserColor = (event) => {\n    this.setState(\n      {newUserColor: event.target.value}\n    );\n  }\n\n  fromDateToDateString = (date) => {\n    let output = date.getFullYear() + '-';\n    let m = date.getMonth();\n    if(m < 9){\n      output += '0'\n    }\n    output += (m + 1) + '-';\n    let d = date.getDate();\n    if(d < 10){\n      output += '0'\n    }\n    output += d;\n    return output;\n  }\n\n  today = () => {\n    return(this.fromDateToDateString(new Date()));\n  }\n\n  render() {\n    if(\n        (this.state.mode !== \"list\" && this.state.control) \n        || this.state.docsMode === \"help\"\n        || this.state.docsMode === \"about\" \n      ){\n      let editControl = undefined;\n      if(this.state.control === \"person\"){\n        editControl = (\n          <EditPerson\n           onCancel={this.doCancelEdit} \n            mode={this.state.mode} \n            personId={this.state.personId}\n            callbackPersonAdd={this.callbackPersonAdd}\n            callbackPersonDelete={this.callbackPersonDelete}\n            >\n          </EditPerson>\n        );\n      }else if(this.state.control === \"medicine\"){\n        editControl = (\n          <EditMedicine\n            onCancel={this.doCancelEdit} \n            onDelete={this.callbackMedicineDelete}\n            onRestock={this.callbackMedicineDelete}\n            onAdd={this.callbackMedicineAdd}\n            onPrn={this.callbackMedicinePrn}\n            mode={this.state.mode} \n            personId={this.state.personId}\n            medicineId={this.state.medicineId}\n            >\n          </EditMedicine>\n        );\n      }else if(this.state.docsMode === \"help\"){\n        editControl = (\n          <Documentation\n            doClose={this.doShowPeople}\n          >\n          </Documentation>\n        );\n      }else if(this.state.docsMode === \"about\"){\n        editControl = (\n          <About\n            doClose={this.doShowPeople}\n            >\n          </About>\n        );\n      }\n      return (\n        <div className=\"App\">\n          <div id=\"mainContent\">\n            <header className=\"App-header\">\n              <div className=\"App-header-div\">\n                <div className=\"App-header-div-logo\"><img src={logo} className=\"App-logo\" alt=\"logo\" /></div>\n                <div className=\"App-header-div-title\"><h1>Pharma</h1></div>\n              </div>\n            </header>\n            <section className=\"AppSection\">\n              {editControl}\n            </section>\n        </div>\n        <div id=\"footerContent\">\n          <footer className=\"App-footer\">\n            <div className=\"App-footer-div\">\n              <div className=\"App-footer-version\"><p className=\"App-footer-version\">Version: <span className=\"App-footer-version\">{this.state.version}</span></p></div>\n              <div className=\"App-footer-copyright\"><p className=\"App-footer-copyright\">&copy; 2021 molorosh</p></div>\n            </div>\n          </footer>\n        </div>\n      </div>    \n      );\n    }\n      // persons\n      let personsHtml = null;\n      let medsHtml = null;\n      if(this.state.persons){\n        const pp = this.state.persons.slice();\n        personsHtml = pp.map((p) =>{\n            let style = { backgroundColor: p.color };\n            // person drug list\n            let meds = this.state.meds.slice();\n            medsHtml = meds.map(\n              (m) => {\n                let prnButton = <></>;\n                let daysLeft = <><p>days left: <strong>{m.daysLeft}</strong> <em>({m.until})</em></p></>;\n                let scheduleTxt = <>every {m.everyNdays} day(s)</>;\n                if(m.everyNdays === \"0\"){\n                  scheduleTxt = \"PRN (take as required)\";\n                  daysLeft = <><p>doses left: <strong>{m.daysLeft}</strong></p></>;\n                  prnButton = (<><button \n                    onClick={() => {\n                      this.doPrnMedicine(p.id, m.id);\n                    }} \n                    className=\"pharma-btn pharma-btn-prn\"\n                    >\n                      Give PRN\n                  </button>\n                  <br/>\n                  </>);\n                }\n                if(m.personId === p.id){\n                  let strengthText = (<></>);\n                  if(this.isSomething(m.strength)){\n                    strengthText = (<em>({m.strength})</em>);\n                  }\n                  \n                  return (\n                    <div className=\"pharma-person-medicine\" key={m.id}>\n                      <p className=\"pharma-person-medicine-edit\">\n                        {prnButton}\n                        <button \n                          onClick={() => {\n                            this.doRestockMedicine(p.id, m.id);\n                          }} \n                          className=\"pharma-btn pharma-btn-restock\"\n                          >\n                            Restock Medicine\n                        </button>\n                        <br/>\n                        <button \n                          onClick={() => {\n                            this.doDeleteMedicine(p.id, m.id);\n                          }} \n                          className=\"pharma-btn pharma-btn-delete\"\n                          >\n                            Delete Medicine\n                        </button>\n                      </p>\n                      <p><strong>{m.name}</strong> {strengthText}</p>\n                      <p>{m.scheduleAmount} {m.units} {scheduleTxt}</p>\n                      {daysLeft}\n                    </div>\n                    );\n                }else{\n                  return (undefined);\n                }\n              });\n            return (\n              <div key={p.id} className=\"pharma-person\" style={style}>\n                <p className=\"pharma-delete-person-para\">\n                  <button\n                    onClick={\n                      () => {\n                        this.doDeleteUser(p.id);\n                      }\n                    } \n                    className=\"pharma-btn pharma-btn-delete\" >Delete Person</button>\n                </p>\n                <h1>{p.icon} {p.name}</h1>\n                <h4><span className=\"emoji-prefix\" role=\"img\" aria-label=\"Medicine\">💊</span> Medicines</h4>\n                <p>\n                  <button \n                    onClick={() => {this.doEditMedicine(p.id, undefined);}} \n                    className=\"pharma-btn pharma-btn-add\">\n                      Add Medicine\n                    </button>\n                  </p>\n                {medsHtml}\n              </div>\n            );\n        });\n      }\n      \n    return (\n      <div className=\"App\">\n        <div id=\"mainContent\">\n          <header className=\"App-header\">\n            <div className=\"App-header-div\">\n              <div className=\"App-header-div-logo\"><img src={logo} className=\"App-logo\" alt=\"logo\" /></div>\n              <div className=\"App-header-div-title\"><h1>Pharma</h1></div>\n            </div>\n          </header>\n          <section className=\"AppSection\">\n              <h3><span className=\"emoji-prefix\" role=\"img\" aria-label=\"People\">👥</span>People</h3>\n              <div className=\"theHelp\"><button className=\"pharma-btn pharma-btn-help\" onClick={this.doShowHelp}>Help</button></div>\n              <div className=\"theAbout\"><button className=\"pharma-btn pharma-btn-about\" onClick={this.doShowAbout}>About</button></div>\n              <p>\n                <button className=\"pharma-btn pharma-btn-add\" onClick={() => { this.doEditUser(undefined) }}>New Person</button>\n              </p>\n              <div>\n                {personsHtml}\n              </div>\n            </section>\n          </div>\n          <div id=\"footerContent\">\n            <footer className=\"App-footer\">\n              <div className=\"App-footer-div\">\n                <div className=\"App-footer-version\"><p className=\"App-footer-version\">Version: <span className=\"App-footer-version\">{this.state.version}</span></p></div>\n                <div className=\"App-footer-copyright\"><p className=\"App-footer-copyright\">&copy; 2019 molorosh</p></div>\n              </div>\n            </footer>\n          </div>\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\nserviceWorker.register();\n\n"],"sourceRoot":""}