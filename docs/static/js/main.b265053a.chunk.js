(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/logo.c695c8b2.svg"},12:function(e,t,a){e.exports=a(22)},17:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),o=a.n(l),s=(a(17),a(2)),i=a(3),c=a(6),u=a(4),d=a(5),h=a(1),m=a(10),p=a.n(m),v=new(a(11).a)("MoloroshPharmaDB");v.version(1).stores({persons:"++id"}),v.version(2).stores({persons:"++id",meds:"++id,personId"});var g=v,y=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"formatTo00",value:function(e){return e<10?"0"+e:e}},{key:"render",value:function(){var e=this,t=Array.from(Array(24).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),a=Array.from(Array(60).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),n=Array.from(Array(14).keys()).map(function(e){return r.a.createElement("option",{key:e+1,value:e+1},e+1)});return r.a.createElement("div",null,r.a.createElement("p",null,"key:",this.props.id,"| Hour:",this.props.hour,r.a.createElement("select",null,t),"| Minute:",this.props.minute,r.a.createElement("select",null,a),"| Every ",r.a.createElement("select",null,n)," Days | Amount:",this.props.amount,"| (",this.props.unit,") |",r.a.createElement("button",null,"Update"),"|",r.a.createElement("button",null,"Delete")))}}]),t}(n.Component),b=function(e){function t(e){var a;Object(s.a)(this,t);var n=void 0,r=void 0,l=void 0,o=void 0,i=void 0,d=(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).dateFromFormattedString(e.value);return null!==d&&(n=d.getHours(),r=d.getFullYear(),i=1+d.getMonth(),l=d.getMinutes(),o=d.getDate()),a.state={isEdit:e.isEdit,isEditable:e.isEditable,value:e.value,currentMinutes:l,currentHours:n,currentDay:o,currentMonth:i,currentYear:r},a.doEdit=a.doEdit.bind(Object(h.a)(Object(h.a)(a))),a.doCancel=a.doCancel.bind(Object(h.a)(Object(h.a)(a))),a.doUpdate=a.doUpdate.bind(Object(h.a)(Object(h.a)(a))),a.doChangeHours=a.doChangeHours.bind(Object(h.a)(Object(h.a)(a))),a.doChangeMinutes=a.doChangeMinutes.bind(Object(h.a)(Object(h.a)(a))),a.doChangeDay=a.doChangeDay.bind(Object(h.a)(Object(h.a)(a))),a.doChangeMonth=a.doChangeMonth.bind(Object(h.a)(Object(h.a)(a))),a.doChangeYear=a.doChangeYear.bind(Object(h.a)(Object(h.a)(a))),a.resetCurrentValues=a.resetCurrentValues.bind(Object(h.a)(Object(h.a)(a))),a.checkDayForValidity=a.checkDayForValidity.bind(Object(h.a)(Object(h.a)(a))),a.stringForCurrentDate=a.stringForCurrentDate.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"resetCurrentValues",value:function(){var e=void 0,t=void 0,a=void 0,n=void 0,r=void 0,l=this.dateFromFormattedString(this.state.value);null!==l&&(e=l.getHours(),t=l.getFullYear(),r=1+l.getMonth(),a=l.getMinutes(),n=l.getDate()),this.setState({currentMinutes:a,currentHours:e,currentDay:n,currentMonth:r,currentYear:t})}},{key:"stringForCurrentDate",value:function(){var e=this.state.currentYear,t=this.state.currentMonth,a=this.state.currentDay,n=this.state.currentHours,r=this.state.currentMinutes;return e+"-"+this.formatTo00(t)+"-"+this.formatTo00(a)+"T"+this.formatTo00(n)+":"+this.formatTo00(r)}},{key:"stringFromDateObject",value:function(e){var t=e.getFullYear(),a=1+e.getMonth(),n=e.getDate(),r=e.getHours(),l=e.getMinutes();return t+"-"+(a<10?"0"+a:a)+"-"+(n<10?"0"+n:n)+"T"+(r<10?"0"+r:r)+":"+(l<10?"0"+l:l)}},{key:"dateFromFormattedString",value:function(e){var t=Date.parse(e),a=null;return t!==Number.NaN&&(a=new Date(t)),a}},{key:"formatTo00",value:function(e){return e<10?"0"+e:e}},{key:"doEdit",value:function(){this.setState({isEdit:!0})}},{key:"doCancel",value:function(){this.resetCurrentValues(),this.setState({isEdit:!1})}},{key:"doUpdate",value:function(){var e=this.stringForCurrentDate();this.props.onChange(e),this.setState({isEdit:!1})}},{key:"doChangeHours",value:function(e){this.setState({currentHours:e.target.value})}},{key:"doChangeMinutes",value:function(e){this.setState({currentMinutes:e.target.value})}},{key:"doChangeYear",value:function(e){var t=this;this.setState({currentYear:e.target.value},function(){return t.checkDayForValidity()})}},{key:"doChangeMonth",value:function(e){var t=this;this.setState({currentMonth:e.target.value},function(){return t.checkDayForValidity()})}},{key:"doChangeDay",value:function(e){this.setState({currentDay:e.target.value})}},{key:"checkDayForValidity",value:function(){var e=31;void 0!==this.state.currentDay&&(e=this.daysInMonth(this.state.currentYear,this.state.currentMonth-1),parseInt(this.state.currentDay)>e&&this.setState({currentDay:e}))}},{key:"daysInMonth",value:function(e,t){var a=31,n=parseInt(t);if(8===n||4===n||6===n||10===n)a=30;else if(1===n){var r=parseInt(e);a=(r%100===0?r%400===0:r%4===0)?29:28}return a}},{key:"render",value:function(){var e=this,t=this.dateFromFormattedString(this.state.value),a=null;null!==t&&(a=this.stringFromDateObject(t));var n=r.a.createElement("span",{className:"editControl"}),l=r.a.createElement("span",{className:"readControl"});if(this.state.isEdit&&this.state.isEditable){var o=Array.from(Array(24).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),s=r.a.createElement("select",{onChange:this.doChangeHours,value:this.state.currentHours},o),i=Array.from(Array(60).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),c=r.a.createElement("select",{onChange:this.doChangeMinutes,value:this.state.currentMinutes},i),u=31;void 0!==this.state.currentDay&&(u=this.daysInMonth(this.state.currentYear,this.state.currentMonth-1));var d=Array.from(Array(u).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t+1},e.formatTo00(t+1))}),h=r.a.createElement("select",{onChange:this.doChangeDay,value:this.state.currentDay},d),m=Array.from(Array(12).keys()).map(function(t){return r.a.createElement("option",{key:t,value:t+1},e.formatTo00(t+1))}),p=r.a.createElement("select",{onChange:this.doChangeMonth,value:this.state.currentMonth},m),v=[2018,2019,2020];void 0!==this.state.currentYear&&this.state.currentYear<2018&&v.unshift(this.state.currentYear);var g=v.map(function(t){return r.a.createElement("option",{key:t,value:t},e.formatTo00(t))}),y=r.a.createElement("select",{onChange:this.doChangeYear,value:this.state.currentYear},g);n=r.a.createElement("span",null,r.a.createElement("p",null,r.a.createElement("span",{className:"pharma-control-title"},this.props.title),":",y,"-",p,"-",h,"T",s,":",c,r.a.createElement("button",{className:"pharma-btn pharma-btn-update",onClick:this.doUpdate},"Update"),r.a.createElement("button",{className:"pharma-btn pharma-btn-cancel",onClick:this.doCancel},"Cancel")))}else l=this.state.isEditable?r.a.createElement("span",null,r.a.createElement("p",null,r.a.createElement("span",{className:"pharma-control-title"},this.props.title),": ",a,r.a.createElement("button",{className:"pharma-btn pharma-btn-edit",onClick:this.doEdit},"Edit"))):r.a.createElement("span",null,r.a.createElement("p",null,r.a.createElement("span",{className:"pharma-control-title"},this.props.title),":  ",a));return r.a.createElement("div",null,n,l)}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={name:"",unit:"",amount:28,timestamp:void 0,schedules:[],nextId:1,dummyDateString:"2008-08-28T23:30"},a.handleChangeUnit=a.handleChangeUnit.bind(Object(h.a)(Object(h.a)(a))),a.handleChangeName=a.handleChangeName.bind(Object(h.a)(Object(h.a)(a))),a.handleChangeAmount=a.handleChangeAmount.bind(Object(h.a)(Object(h.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(h.a)(Object(h.a)(a))),a.addNewSchedule=a.addNewSchedule.bind(Object(h.a)(Object(h.a)(a))),a.handleDrugScheduleDelete=a.handleDrugScheduleDelete.bind(Object(h.a)(Object(h.a)(a))),a.handleDrugScheduleUpdate=a.handleDrugScheduleUpdate.bind(Object(h.a)(Object(h.a)(a))),a.handleDatePickerChange=a.handleDatePickerChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleDatePickerChange",value:function(e){console.log("handleDatePickerChange(...)"),console.log("dateString:"),console.log(e),this.setState({dummyDateString:e},function(){console.log("finished update")})}},{key:"handleChangeUnit",value:function(e){this.setState({unit:e.target.value})}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangeAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"handleFormSubmit",value:function(e){e.preventDefault()}},{key:"addNewSchedule",value:function(){var e=this.state.nextId+1,t={hour:12,minute:20,amount:3,everyNdays:3,id:e};this.setState({schedules:this.state.schedules.concat(t),nextId:e})}},{key:"handleDrugScheduleDelete",value:function(e){alert("delete "+e)}},{key:"handleDrugScheduleUpdate",value:function(e,t,a,n,r){alert("upd8 "+e+" "+t+" "+a+" "+n+" "+r)}},{key:"render",value:function(){var e=this,t=this.props.units.slice(),a=this.state.schedules.slice();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("p",null,"name:",r.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChangeName})),r.a.createElement("p",null,"amount:",r.a.createElement("input",{type:"number",value:this.state.amount,onChange:this.handleChangeAmount}),r.a.createElement("select",{value:this.state.unit,onChange:this.handleChangeUnit},t.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e," (",t,")")}))),r.a.createElement("hr",null),r.a.createElement("h4",null,"DateTimePicker"),r.a.createElement("p",null,"date time data: ",this.state.dummyDateString),r.a.createElement(b,{title:"as at",isEdit:!1,isEditable:!0,value:this.state.dummyDateString,onChange:this.handleDatePickerChange,key:this.state.dummyDateString}),r.a.createElement("hr",null),r.a.createElement("h2",null,"Schedules"),r.a.createElement("p",null,r.a.createElement("button",{onClick:this.addNewSchedule},"Add Schedule")),a.map(function(t,a){return r.a.createElement(y,{key:t.id,id:t.id,hour:t.hour,minute:t.minute,amount:t.amount,unit:e.state.unit})})))}}]),t}(n.Component),f=(a(21),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={units:["pill(s)","mg","ml"],colors:["Pink","Orchid","Salmon","Orange","Khaki","Gainsboro"],icons:["\u06dd","\u06de","\u229c","\u229e","\u2299","\u2297"],newUserName:"",newUserColor:"Pink",newUserIcon:"\u06dd",version:"0.1.0.0",meds:[]},a.handleChangeName=a.handleChangeName.bind(Object(h.a)(Object(h.a)(a))),a.doChangeNewUserName=a.doChangeNewUserName.bind(Object(h.a)(Object(h.a)(a))),a.doChangeNewUserColor=a.doChangeNewUserColor.bind(Object(h.a)(Object(h.a)(a))),a.doChangeNewUserIcon=a.doChangeNewUserIcon.bind(Object(h.a)(Object(h.a)(a))),a.doAddNewUser=a.doAddNewUser.bind(Object(h.a)(Object(h.a)(a))),a.fetchAllData=a.fetchAllData.bind(Object(h.a)(Object(h.a)(a))),a.fetchOnlyUsers=a.fetchOnlyUsers.bind(Object(h.a)(Object(h.a)(a))),a.fetchOnlyMeds=a.fetchOnlyMeds.bind(Object(h.a)(Object(h.a)(a))),a.doAddNewMed=a.doAddNewMed.bind(Object(h.a)(Object(h.a)(a))),a.doMedsCalculations=a.doMedsCalculations.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchAllData()}},{key:"isEmptyOrSpaces",value:function(e){return null===e||null!==e.match(/^ *$/)}},{key:"isSomething",value:function(e){return!(null===e||null!==e.match(/^ *$/))}},{key:"fetchOnlyUsers",value:function(){var e=this;g.table("persons").toArray().then(function(t){e.setState({persons:t})})}},{key:"fetchOnlyMeds",value:function(){var e=this;g.table("meds").toArray().then(function(t){if(t&&t.length)for(var a=0,n=t.length;a<n;a++)e.doMedsCalculations(t[a]);e.setState({meds:t})})}},{key:"fetchAllData",value:function(){var e=this;g.table("persons").toArray().then(function(t){e.setState({persons:t},e.fetchOnlyMeds())})}},{key:"doMedsCalculations",value:function(e){var t=e.stockAmount/e.scheduleAmount*e.everyNdays,a=new Date(Date.parse(e.stockDate+"T00:00:00Z")),n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())),l=new Date(a.valueOf());l.setDate(l.getDate()+t);var o=l.getTime()-r.getTime(),s=Math.ceil(o/864e5);e.daysLeft=s,e.until=this.fromDateToDateString(l)}},{key:"doAddNewMed",value:function(e){var t=document.getElementById("newMedName_"+e).value,a=document.getElementById("newMedDose_"+e).value,n=document.getElementById("newMedStrength_"+e).value,r=document.getElementById("newMedStock_"+e).value,l=document.getElementById("newMedEveryNDays_"+e).value,o=document.getElementById("newMedUnits_"+e).value;if(this.isSomething(t)){var s={personId:e,name:t,strength:n,units:o,stockDate:this.today(),stockAmount:r,scheduleAmount:a,everyNdays:l};g.table("meds").add(s).then(this.fetchAllData())}}},{key:"doAddNewUser",value:function(){var e=this.state.newUserName,t=this.state.newUserColor,a=this.state.newUserIcon;if(!this.isEmptyOrSpaces(e)){var n={name:e,icon:a,color:t};g.table("persons").add(n).then(this.fetchAllData())}}},{key:"handleChangeName",value:function(e){this.setState({newUserName:e.target.value})}},{key:"doChangeNewUserName",value:function(e){this.setState({newUserName:e.target.value})}},{key:"doChangeNewUserIcon",value:function(e){this.setState({newUserIcon:e.target.value})}},{key:"doChangeNewUserColor",value:function(e){this.setState({newUserColor:e.target.value})}},{key:"fromDateToDateString",value:function(e){var t=e.getFullYear()+"-",a=e.getMonth();a<9&&(t+="0"),t+=a+1+"-";var n=e.getDate();return n<10&&(t+="0"),t+=n}},{key:"today",value:function(){return this.fromDateToDateString(new Date)}},{key:"render",value:function(){var e=this,t=this.state.units.slice(),a=this.state.colors.slice().map(function(e){var t={backgroundColor:e};return r.a.createElement("option",{style:t,key:e,value:e},e)}),n={backgroundColor:this.state.newUserColor},l=r.a.createElement("select",{style:n,onChange:this.doChangeNewUserColor,value:this.state.newUserColor},a),o=this.state.icons.slice().map(function(e){return r.a.createElement("option",{key:e,value:e},e)}),s=r.a.createElement("select",{onChange:this.doChangeNewUserIcon,value:this.state.newUserIcon},o),i=null,c=null;this.state.persons&&(i=this.state.persons.slice().map(function(t){var a={backgroundColor:t.color},n=e.state.meds.slice();return c=n.map(function(e){return e.personId===t.id?r.a.createElement("div",{key:e.id},r.a.createElement("p",null,"mid: ",e.id),r.a.createElement("p",null,"name: ",e.name),r.a.createElement("p",null,"days left: ",e.daysLeft),r.a.createElement("p",null,"until: ",e.until)):void 0}),r.a.createElement("div",{key:t.id,className:"pharma-person",style:a},r.a.createElement("h1",null,t.icon,t.name),r.a.createElement("p",null,r.a.createElement("i",null,"id=",t.id)),r.a.createElement("h4",null,r.a.createElement("span",{role:"img","aria-label":"Medicine"},"\ud83d\udc8a"),"Drug"),r.a.createElement("p",null,"name: ",r.a.createElement("input",{id:"newMedName_"+t.id,type:"text"}),"units: ",r.a.createElement("select",{defaultValue:"tablet(s)",id:"newMedUnits_"+t.id},r.a.createElement("option",{value:"tablet(s)"},"tablet(s)"),r.a.createElement("option",{value:"ml"},"ml"),r.a.createElement("option",{value:"floz"},"fl oz")),"strength: ",r.a.createElement("input",{id:"newMedStrength_"+t.id,type:"text"}),"dose: ",r.a.createElement("input",{id:"newMedDose_"+t.id,type:"text"}),"every",r.a.createElement("select",{defaultValue:"1",id:"newMedEveryNDays_"+t.id},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"1"},"2"),r.a.createElement("option",{value:"1"},"3"),r.a.createElement("option",{value:"1"},"4"),r.a.createElement("option",{value:"1"},"5"),r.a.createElement("option",{value:"1"},"6"),r.a.createElement("option",{value:"1"},"7"))," days stock level: ",r.a.createElement("input",{id:"newMedStock_"+t.id,type:"text"}),r.a.createElement("button",{className:"pharma-btn pharma-btn-add",onClick:function(){var a="??",n=document.getElementById("newMedName_"+t.id);n&&(a=n.value,e.doAddNewMed(t.id,a))}},"Add")),r.a.createElement("p",null,e.today()),c)}));return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"App-header-div"},r.a.createElement("div",{className:"App-header-div-logo"},r.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"})),r.a.createElement("div",{className:"App-header-div-title"},r.a.createElement("h1",null,"Pharma")))),r.a.createElement("section",{className:"AppSection"},r.a.createElement("h3",null,r.a.createElement("span",{role:"img","aria-label":"People"},"\ud83d\udc65"),"People"),r.a.createElement("div",null,r.a.createElement("p",null,"initials: ",r.a.createElement("input",{type:"text",size:"5",maxLength:"5",value:this.state.newUserName,onChange:this.doChangeNewUserName}),"color: ",l,"icon: ",s,r.a.createElement("button",{className:"pharma-btn pharma-btn-add",onClick:this.doAddNewUser},"Add")),i),r.a.createElement("hr",null),r.a.createElement("h3",null,r.a.createElement("span",{role:"img","aria-label":"Medicine"},"\ud83d\udc8a"),"Drug"),r.a.createElement(E,{units:t})),r.a.createElement("footer",{className:"App-footer"},r.a.createElement("div",{className:"App-footer-div"},r.a.createElement("div",{className:"App-footer-version"},r.a.createElement("p",{className:"App-footer-version"},"Version: ",r.a.createElement("span",{className:"App-footer-version"},this.state.version))),r.a.createElement("div",{className:"App-footer-copyright"},r.a.createElement("p",{className:"App-footer-copyright"},"\xa9 2019 molorosh")))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,1,2]]]);
//# sourceMappingURL=main.b265053a.chunk.js.map